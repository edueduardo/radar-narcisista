================================================================================
RADAR NARCISISTA â€“ CHECKLIST DE TESTES
================================================================================
VersÃ£o: 1.4
Ãšltima atualizaÃ§Ã£o: 30/11/2025 09:20 (UTC-5)

================================================================================
FLUXO 1 â€“ TESTE DE CLAREZA
================================================================================

â˜ Consigo responder as 18+1 perguntas sem erro
â˜ Vejo o resultado com zona global + eixos + categorias
â˜ A opÃ§Ã£o "Guardar como base" funciona sem erro
â˜ Depois de guardar, o Dashboard mostra recomendaÃ§Ãµes baseadas nesse teste
â˜ Posso refazer o teste e ver histÃ³rico

================================================================================
FLUXO 2 â€“ DIÃRIO
================================================================================

â˜ Consigo criar um diÃ¡rio normal (sem teste)
â˜ Consigo criar um diÃ¡rio vinculado Ã  base de clareza
â˜ O diÃ¡rio aparece na timeline em ordem correta
â˜ Se faÃ§o login/logout, os diÃ¡rios continuam lÃ¡
â˜ Posso editar um diÃ¡rio existente
â˜ Posso excluir um diÃ¡rio
â˜ A anÃ¡lise de IA funciona no diÃ¡rio

================================================================================
FLUXO 3 â€“ CHAT / COACH IA
================================================================================

â˜ Consigo abrir o chat logado
â˜ A IA fala como "Radar Narcisista", nÃ£o genÃ©rico
â˜ A IA usa contexto do teste (zona, risco) na resposta
â˜ A IA usa contexto do diÃ¡rio recente
â˜ Limite de mensagens por plano funciona
â˜ Mensagem de limite atingido aparece corretamente
â˜ BotÃ£o "Salvar no DiÃ¡rio" aparece apÃ³s 2+ mensagens
â˜ Modal de resumo permite editar texto, intensidade e tags
â˜ Resumo salvo aparece no DiÃ¡rio com badge "Resumo do Chat"
â˜ Modal de encerramento oferece opÃ§Ã£o de salvar resumo

================================================================================
FLUXO 4 â€“ FRONTPAGE / PLANOS
================================================================================

â˜ Homepage abre sem erro em aba anÃ´nima
â˜ As seÃ§Ãµes principais aparecem (hero, ferramentas, planos, FAQ)
â˜ BotÃ£o de cada plano leva para onde deveria
â˜ Planos sÃ£o carregados do banco (ou fallback funciona)
â˜ PromoÃ§Ãµes ativas aparecem com labels
â˜ PreÃ§o original riscado aparece quando hÃ¡ promoÃ§Ã£o

================================================================================
FLUXO 5 â€“ ADMIN / PLANOS
================================================================================

â˜ Consigo acessar /admin/planos como admin
â˜ Vejo lista de todos os planos (B2C e B2B)
â˜ Consigo editar nome, preÃ§o e limites de um plano
â˜ Consigo criar uma promoÃ§Ã£o com data de inÃ­cio/fim
â˜ Consigo ativar/desativar promoÃ§Ã£o
â˜ AlteraÃ§Ãµes refletem na frontpage

================================================================================
FLUXO 6 â€“ AUTENTICAÃ‡ÃƒO
================================================================================

â˜ Consigo criar conta nova
â˜ Consigo fazer login
â˜ Consigo fazer logout
â˜ Consigo recuperar senha
â˜ SessÃ£o persiste apÃ³s fechar navegador

================================================================================
FLUXO 7 â€“ LGPD / CONFIGURAÃ‡Ã•ES
================================================================================

â˜ Consigo exportar meus dados
â˜ Consigo solicitar exclusÃ£o de conta
â˜ Aceite de termos funciona
â˜ HistÃ³rico de aceites Ã© registrado

================================================================================
TESTES AUTOMATIZADOS (JEST)
================================================================================

â˜ npm run test passa sem erros
â˜ Cobertura mÃ­nima de 50%

================================================================================
TESTES DE BUILD
================================================================================

â˜ npm run build passa sem erros
â˜ Deploy na Vercel funciona
â˜ NÃ£o hÃ¡ erros de TypeScript

================================================================================
LEGENDA
================================================================================

â˜ = NÃ£o testado / Pendente
â˜‘ = Testado e funcionando
âœ— = Testado e com problema

================================================================================
TESTES REALIZADOS (29-30/11/2025)
================================================================================

FLUXO 5 â€“ ADMIN / PLANOS:
â˜‘ Consigo acessar /admin/planos como admin (CORRIGIDO)
â˜‘ Vejo lista de todos os planos (B2C e B2B)
â˜ Consigo editar nome, preÃ§o e limites de um plano
â˜‘ Consigo criar uma promoÃ§Ã£o com data de inÃ­cio/fim (RLS CORRIGIDO)
â˜ Consigo ativar/desativar promoÃ§Ã£o
â˜ AlteraÃ§Ãµes refletem na frontpage

FLUXO 6 â€“ AUTENTICAÃ‡ÃƒO:
â˜‘ Consigo fazer login com etailoffice@gmail.com
â˜‘ Admin Ã© reconhecido corretamente apÃ³s correÃ§Ã£o

TESTES DE BUILD:
â˜‘ npm run build passa sem erros (129 pÃ¡ginas)
â˜‘ Deploy na Vercel funciona
â˜‘ NÃ£o hÃ¡ erros de TypeScript

CORREÃ‡Ã•ES APLICADAS:
â˜‘ BotÃ£o "Config Menu" agora vai para /admin/menu-config (nÃ£o localhost)
â˜‘ DiÃ¡rio unificado - rotas duplicadas arquivadas em app/_archive/
â˜‘ Links do dashboard atualizados para rotas oficiais
â˜‘ Build passou com 129 pÃ¡ginas
â˜‘ Badge "Perfil de Clareza" implementado no DiÃ¡rio
â˜‘ Badge "Perfil de Clareza" + "Intenso" implementado na Timeline
â˜‘ Tipos JournalEntryType adicionados em types/database.ts

ROTAS OFICIAIS DO DIÃRIO:
â˜‘ /diario â†’ Lista de entradas
â˜‘ /diario/novo â†’ Criar entrada
â˜‘ /diario/[id] â†’ Visualizar entrada
â˜‘ /diario/[id]/editar â†’ Editar entrada
â˜‘ /diario/timeline â†’ Timeline de PadrÃµes

ETAPA 2 - TRIÃ‚NGULO CLAREZA â‡„ DIÃRIO â‡„ CHAT:
â˜ Fazer Teste de Clareza e salvar como base â†’ Deve criar entrada no diÃ¡rio
â˜ Entrada criada deve ter entry_type = 'clarity_baseline'
â˜ Entrada criada deve ter clarity_test_id preenchido
â˜ Chat deve receber contexto dos episÃ³dios recentes do diÃ¡rio
â˜ Chat deve receber perfil de clareza do usuÃ¡rio
â˜ Verificar logs no console do servidor (Vercel) para confirmar injeÃ§Ã£o de contexto
â˜ Acessar /diario/novo?from=clarity_result â†’ Deve prÃ©-preencher formulÃ¡rio
â˜ FormulÃ¡rio prÃ©-preenchido deve ter tÃ­tulo, tags e descriÃ§Ã£o do perfil de clareza

MIGRATION OBRIGATÃ“RIA (executar no Supabase):
ALTER TABLE public.journal_entries 
ADD COLUMN IF NOT EXISTS entry_type TEXT DEFAULT 'normal';

ALTER TABLE public.journal_entries 
ADD COLUMN IF NOT EXISTS clarity_test_id UUID REFERENCES public.clarity_tests(id);

ETAPA 3 - DIÃRIO + TIMELINE + DASHBOARD CONECTADOS AO TRIÃ‚NGULO:
â˜ /diario â†’ Entradas clarity_baseline devem mostrar badge "Perfil de Clareza"
â˜ /diario/timeline â†’ Entradas clarity_baseline devem mostrar badge "Perfil de Clareza"
â˜ /diario/timeline â†’ Entradas com mood_intensity >= 7 devem mostrar badge "Intenso"
â˜ /dashboard â†’ Deve mostrar dados reais de clareza (nÃ£o mock)
â˜ /dashboard â†’ Deve mostrar Ãºltimas entradas do diÃ¡rio reais
â˜ /dashboard â†’ EstatÃ­sticas (testes, episÃ³dios, mensagens) devem ser reais
â˜ Fluxo completo: Teste Clareza â†’ Salvar Base â†’ Ver entrada no DiÃ¡rio com badge
â˜ Fluxo completo: Teste Clareza â†’ Salvar Base â†’ Ver entrada na Timeline com badge

ETAPA 4 - CHAT â†’ DIÃRIO (SALVAR RESUMO):
â˜ API /api/chat/save-summary funciona (POST com auth)
â˜ BotÃ£o "Salvar no DiÃ¡rio" aparece no header do chat apÃ³s 2+ mensagens do usuÃ¡rio
â˜ Modal de resumo abre ao clicar no botÃ£o
â˜ Modal permite editar texto, ajustar intensidade (slider 0-10) e tags
â˜ Ao salvar, cria entrada no diÃ¡rio com entry_type = 'chat_summary'
â˜ Entrada salva aparece no /diario com badge "Resumo do Chat" (ğŸ’¬)
â˜ Entrada salva aparece no /diario/timeline com badge "Resumo do Chat"
â˜ Modal de encerramento de conversa oferece checkbox para salvar resumo
â˜ Se marcar checkbox e clicar "Continuar para salvar resumo", abre modal de resumo
â˜ Fluxo completo: Chat â†’ Salvar resumo â†’ Ver no DiÃ¡rio com badge

================================================================================
ETAPA 5 - EDITOR VISUAL DA FRONTPAGE:
================================================================================

â˜ Migration 007_frontpage_config.sql executada no Supabase
â˜ Tabela frontpage_config criada com dados seed
â˜ API /api/admin/frontpage-editor funciona (GET retorna configs)
â˜ API /api/admin/frontpage-editor funciona (PUT atualiza config)
â˜ /admin/frontpage-editor carrega sem erro
â˜ Editor de Hero permite editar tÃ­tulo, subtÃ­tulo e CTAs
â˜ Editor de FAQ permite adicionar/remover perguntas
â˜ Editor de Depoimentos permite adicionar/remover itens
â˜ BotÃ£o "Salvar" atualiza dados no banco
â˜ /admin/frontpage-visual carrega sem erro
â˜ Preview mostra alteraÃ§Ãµes em tempo real
â˜ Preview responsivo funciona (desktop/tablet/mobile)
â˜ AlteraÃ§Ãµes salvas refletem na frontpage real
â˜ Fallback funciona se tabela nÃ£o existir

================================================================================
MIGRATIONS PENDENTES (EXECUTAR NO SUPABASE):
================================================================================

1. 007_frontpage_config.sql
   - Cria tabela frontpage_config
   - Insere dados seed (hero, faq, testimonials, etc.)
   - Configura RLS para admins

================================================================================
FIM DO CHECKLIST DE TESTES
================================================================================
