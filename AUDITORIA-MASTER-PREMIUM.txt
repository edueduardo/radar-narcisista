================================================================================
AUDITORIA MASTER PREMIUM - RADAR NARCISISTA
================================================================================
Criado: 03/12/2025 23:30 UTC-5
Autoria: Windsurf + ChatGPT + Eduardo
VersÃ£o: 1.0

OBJETIVO:
Este arquivo Ã© a AUDITORIA RIGOROSA do projeto Radar Narcisista.
Ele verifica se tudo que estÃ¡ documentado em:
â”œâ”€â”€ FUTURO-TERMINAR-IMPLEMENTACAO.txt
â””â”€â”€ HISTORICO-UNIFICADO.txt
...realmente existe no cÃ³digo e funciona.

================================================================================
=== ğŸ“‹ PROMPT DE AUDITORIA MASTER ===
================================================================================

NOME: RADAR â€“ AUDITORIA MASTER PREMIUM

VocÃª Ã© o MAIOR AUDITOR DE CÃ“DIGO DO MUNDO.
VocÃª vai auditar o projeto "radar-narcisista" com os mais altos padrÃµes
do mercado profissional.

REGRAS ABSOLUTAS:
â”œâ”€â”€ NÃƒO dizer que algo existe se nÃ£o encontrou no cÃ³digo
â”œâ”€â”€ NÃƒO dizer que algo funciona se nÃ£o verificou
â”œâ”€â”€ NÃƒO inventar features que nÃ£o existem
â”œâ”€â”€ SEMPRE comparar: DOCUMENTADO vs. IMPLEMENTADO
â””â”€â”€ SEMPRE gerar relatÃ³rio com âœ… / âŒ / âš ï¸

================================================================================
=== ETAPA A.0 â€“ LEITURA DOS ARQUIVOS DE REFERÃŠNCIA ===
================================================================================

ARQUIVOS A LER (OBRIGATÃ“RIO):
â”œâ”€â”€ FUTURO-TERMINAR-IMPLEMENTACAO.txt (fonte da verdade de ETAPAs)
â”œâ”€â”€ HISTORICO-UNIFICADO.txt (histÃ³rico de decisÃµes)
â”œâ”€â”€ ATLAS-RADAR-NARCISISTA.txt (mapa tÃ©cnico)
â”œâ”€â”€ ROADMAP-RADAR.txt (status das ETAPAs)
â”œâ”€â”€ TUDO PARA O GPT.txt (visÃ£o de produto)
â”œâ”€â”€ TESTES-RADAR.txt (checklists de testes)
â””â”€â”€ ESPELHO-CODIGO-RADAR.txt (estrutura de arquivos)

OBJETIVO:
Entender o que DEVERIA existir antes de verificar o que EXISTE.

================================================================================
=== ETAPA A.1 â€“ AUDITORIA DE ESTRUTURA DE ARQUIVOS ===
================================================================================

VERIFICAR:
â”œâ”€â”€ [ ] Todas as pastas principais existem (app/, lib/, components/, database/)
â”œâ”€â”€ [ ] Todos os arquivos crÃ­ticos existem
â”œâ”€â”€ [ ] Migrations estÃ£o na pasta correta
â”œâ”€â”€ [ ] Arquivos de configuraÃ§Ã£o estÃ£o corretos (.env.local, next.config.js)
â””â”€â”€ [ ] Nenhum arquivo Ã³rfÃ£o ou duplicado

GERAR RELATÃ“RIO:
â”œâ”€â”€ Arquivos que DEVERIAM existir mas NÃƒO existem
â”œâ”€â”€ Arquivos que EXISTEM mas NÃƒO estÃ£o documentados
â””â”€â”€ Arquivos duplicados ou conflitantes

================================================================================
=== ETAPA A.2 â€“ AUDITORIA DE ROTAS E PÃGINAS ===
================================================================================

VERIFICAR CADA ROTA DOCUMENTADA:
â”œâ”€â”€ [ ] A pÃ¡gina existe em app/
â”œâ”€â”€ [ ] A pÃ¡gina renderiza sem erro
â”œâ”€â”€ [ ] A pÃ¡gina tem os componentes esperados
â”œâ”€â”€ [ ] A pÃ¡gina estÃ¡ conectada Ã s APIs corretas
â””â”€â”€ [ ] A pÃ¡gina respeita o plano do usuÃ¡rio (se aplicÃ¡vel)

ROTAS CRÃTICAS A VERIFICAR:
â”œâ”€â”€ /dashboard (usuÃ¡ria)
â”œâ”€â”€ /dashboard-profissional (profissional)
â”œâ”€â”€ /aceitar-convite (aceite de convite)
â”œâ”€â”€ /configuracoes/profissionais (gestÃ£o de conexÃµes)
â”œâ”€â”€ /admin/* (todas as rotas admin)
â”œâ”€â”€ /teste-clareza (teste de clareza)
â”œâ”€â”€ /diario (diÃ¡rio)
â”œâ”€â”€ /chat (chat IA)
â””â”€â”€ /plano-seguranca (plano de seguranÃ§a)

GERAR RELATÃ“RIO:
â”œâ”€â”€ Rotas que DEVERIAM existir mas NÃƒO existem
â”œâ”€â”€ Rotas que EXISTEM mas NÃƒO estÃ£o documentadas
â””â”€â”€ Rotas com erros de renderizaÃ§Ã£o

================================================================================
=== ETAPA A.3 â€“ AUDITORIA DE APIs ===
================================================================================

VERIFICAR CADA API DOCUMENTADA:
â”œâ”€â”€ [ ] O arquivo existe em app/api/
â”œâ”€â”€ [ ] A API responde aos mÃ©todos esperados (GET, POST, PATCH, DELETE)
â”œâ”€â”€ [ ] A API valida os parÃ¢metros corretamente
â”œâ”€â”€ [ ] A API respeita RLS e autenticaÃ§Ã£o
â”œâ”€â”€ [ ] A API retorna os dados esperados
â””â”€â”€ [ ] A API trata erros corretamente

APIs CRÃTICAS A VERIFICAR:
â”œâ”€â”€ /api/professional/clients (CRUD de clientes)
â”œâ”€â”€ /api/professional/invite/validate (validar convite)
â”œâ”€â”€ /api/professional/invite/accept (aceitar convite)
â”œâ”€â”€ /api/client/connections (conexÃµes do cliente)
â”œâ”€â”€ /api/professional/reports/[clientId] (relatÃ³rio por cliente)
â”œâ”€â”€ /api/safety-plan (plano de seguranÃ§a)
â”œâ”€â”€ /api/journal (diÃ¡rio)
â”œâ”€â”€ /api/clarity-test (teste de clareza)
â””â”€â”€ /api/chat (chat IA)

GERAR RELATÃ“RIO:
â”œâ”€â”€ APIs que DEVERIAM existir mas NÃƒO existem
â”œâ”€â”€ APIs que EXISTEM mas NÃƒO estÃ£o documentadas
â””â”€â”€ APIs com erros de validaÃ§Ã£o ou resposta

================================================================================
=== ETAPA A.4 â€“ AUDITORIA DE BANCO DE DADOS ===
================================================================================

VERIFICAR:
â”œâ”€â”€ [ ] Todas as tabelas documentadas existem no Supabase
â”œâ”€â”€ [ ] Todas as colunas estÃ£o corretas
â”œâ”€â”€ [ ] RLS estÃ¡ configurado corretamente
â”œâ”€â”€ [ ] Migrations estÃ£o em ordem
â”œâ”€â”€ [ ] NÃ£o hÃ¡ migrations pendentes
â””â”€â”€ [ ] NÃ£o hÃ¡ dados Ã³rfÃ£os

TABELAS CRÃTICAS A VERIFICAR:
â”œâ”€â”€ users / profiles
â”œâ”€â”€ journal_entries
â”œâ”€â”€ clarity_results
â”œâ”€â”€ safety_plans
â”œâ”€â”€ risk_alerts
â”œâ”€â”€ professional_clients
â”œâ”€â”€ professional_brand (se existir)
â”œâ”€â”€ plan_catalog
â”œâ”€â”€ billing_plans
â””â”€â”€ content_items / content_suggestions

GERAR RELATÃ“RIO:
â”œâ”€â”€ Tabelas que DEVERIAM existir mas NÃƒO existem
â”œâ”€â”€ Colunas faltando ou incorretas
â””â”€â”€ Problemas de RLS

================================================================================
=== ETAPA A.5 â€“ AUDITORIA DE FLUXOS CRÃTICOS ===
================================================================================

VERIFICAR CADA FLUXO END-TO-END:

FLUXO 1 â€“ TESTE DE CLAREZA:
â”œâ”€â”€ [ ] UsuÃ¡ria acessa /teste-clareza
â”œâ”€â”€ [ ] Responde perguntas
â”œâ”€â”€ [ ] Resultado Ã© salvo em clarity_results
â”œâ”€â”€ [ ] Dashboard mostra resultado
â””â”€â”€ [ ] Trilha do herÃ³i atualiza

FLUXO 2 â€“ DIÃRIO:
â”œâ”€â”€ [ ] UsuÃ¡ria acessa /diario
â”œâ”€â”€ [ ] Cria entrada (texto ou voz)
â”œâ”€â”€ [ ] Entrada Ã© salva em journal_entries
â”œâ”€â”€ [ ] Tags sÃ£o aplicadas
â””â”€â”€ [ ] Timeline mostra entrada

FLUXO 3 â€“ CHAT IA:
â”œâ”€â”€ [ ] UsuÃ¡ria acessa /chat
â”œâ”€â”€ [ ] Envia mensagem
â”œâ”€â”€ [ ] IA responde
â”œâ”€â”€ [ ] Conversa Ã© salva
â””â”€â”€ [ ] DetecÃ§Ã£o de risco funciona

FLUXO 4 â€“ PLANO DE SEGURANÃ‡A:
â”œâ”€â”€ [ ] UsuÃ¡ria acessa /plano-seguranca
â”œâ”€â”€ [ ] Preenche dados
â”œâ”€â”€ [ ] Plano Ã© salvo em safety_plans
â”œâ”€â”€ [ ] Dashboard mostra status
â””â”€â”€ [ ] BotÃ£o de emergÃªncia funciona

FLUXO 5 â€“ PROFISSIONAL/CLIENTE:
â”œâ”€â”€ [ ] Profissional cria convite
â”œâ”€â”€ [ ] Cliente acessa /aceitar-convite
â”œâ”€â”€ [ ] Cliente aceita com permissÃµes
â”œâ”€â”€ [ ] Profissional vÃª cliente no dashboard
â”œâ”€â”€ [ ] Profissional acessa relatÃ³rio
â””â”€â”€ [ ] Cliente pode revogar acesso

GERAR RELATÃ“RIO:
â”œâ”€â”€ Fluxos que funcionam completamente âœ…
â”œâ”€â”€ Fluxos com problemas âš ï¸
â””â”€â”€ Fluxos que nÃ£o funcionam âŒ

================================================================================
=== ETAPA A.6 â€“ AUDITORIA DE SEGURANÃ‡A E LGPD ===
================================================================================

VERIFICAR:
â”œâ”€â”€ [ ] Todas as APIs tÃªm autenticaÃ§Ã£o
â”œâ”€â”€ [ ] RLS estÃ¡ ativo em todas as tabelas sensÃ­veis
â”œâ”€â”€ [ ] Dados sensÃ­veis nÃ£o sÃ£o expostos em logs
â”œâ”€â”€ [ ] UsuÃ¡rio pode exportar seus dados
â”œâ”€â”€ [ ] UsuÃ¡rio pode deletar sua conta
â”œâ”€â”€ [ ] Termos de uso sÃ£o aceitos
â”œâ”€â”€ [ ] Consentimento Ã© registrado
â””â”€â”€ [ ] NÃ£o hÃ¡ vazamento de dados entre usuÃ¡rios

GERAR RELATÃ“RIO:
â”œâ”€â”€ Problemas de seguranÃ§a encontrados
â”œâ”€â”€ Problemas de LGPD encontrados
â””â”€â”€ RecomendaÃ§Ãµes de correÃ§Ã£o

================================================================================
=== ETAPA A.7 â€“ AUDITORIA DE Ã‰TICA E MICROCÃ“PIA ===
================================================================================

VERIFICAR:
â”œâ”€â”€ [ ] Nenhum texto promete "diagnÃ³stico" ou "laudo"
â”œâ”€â”€ [ ] Nenhum texto promete "terapia" ou "tratamento"
â”œâ”€â”€ [ ] Disclaimers estÃ£o presentes onde necessÃ¡rio
â”œâ”€â”€ [ ] Linguagem Ã© acolhedora e nÃ£o-julgadora
â”œâ”€â”€ [ ] BotÃ£o de emergÃªncia estÃ¡ visÃ­vel
â””â”€â”€ [ ] InformaÃ§Ãµes de ajuda real estÃ£o disponÃ­veis

GERAR RELATÃ“RIO:
â”œâ”€â”€ Textos problemÃ¡ticos encontrados
â”œâ”€â”€ Disclaimers faltando
â””â”€â”€ RecomendaÃ§Ãµes de ajuste

================================================================================
=== ETAPA A.8 â€“ AUDITORIA DE DOCUMENTAÃ‡ÃƒO ===
================================================================================

VERIFICAR:
â”œâ”€â”€ [ ] FUTURO-TERMINAR-IMPLEMENTACAO.txt estÃ¡ atualizado
â”œâ”€â”€ [ ] HISTORICO-UNIFICADO.txt estÃ¡ atualizado
â”œâ”€â”€ [ ] ATLAS-RADAR-NARCISISTA.txt reflete o cÃ³digo real
â”œâ”€â”€ [ ] ROADMAP-RADAR.txt tem status corretos
â”œâ”€â”€ [ ] TESTES-RADAR.txt tem checklists atualizados
â”œâ”€â”€ [ ] ESPELHO-CODIGO-RADAR.txt reflete a estrutura real
â””â”€â”€ [ ] Manuais existem (se aplicÃ¡vel)

GERAR RELATÃ“RIO:
â”œâ”€â”€ Documentos desatualizados
â”œâ”€â”€ InformaÃ§Ãµes conflitantes entre documentos
â””â”€â”€ Documentos faltando

================================================================================
=== ETAPA A.FINAL â€“ RELATÃ“RIO CONSOLIDADO ===
================================================================================

GERAR RELATÃ“RIO FINAL COM:

1) RESUMO EXECUTIVO:
   â”œâ”€â”€ Total de itens auditados
   â”œâ”€â”€ Total de âœ… (OK)
   â”œâ”€â”€ Total de âš ï¸ (AtenÃ§Ã£o)
   â””â”€â”€ Total de âŒ (Problema)

2) LISTA DE PROBLEMAS CRÃTICOS:
   â”œâ”€â”€ Problemas que impedem o funcionamento
   â””â”€â”€ Problemas de seguranÃ§a/LGPD

3) LISTA DE MELHORIAS RECOMENDADAS:
   â”œâ”€â”€ Melhorias de UX
   â”œâ”€â”€ Melhorias de performance
   â””â”€â”€ Melhorias de documentaÃ§Ã£o

4) PRÃ“XIMOS PASSOS SUGERIDOS:
   â”œâ”€â”€ O que corrigir primeiro
   â”œâ”€â”€ O que pode esperar
   â””â”€â”€ O que Ã© opcional

5) LÃ‚MPADA â€“ OBSERVAÃ‡Ã•ES PARA O EDUARDO:
   â”œâ”€â”€ ğŸ’¡ Coisas boas que devem ser preservadas
   â”œâ”€â”€ ğŸ’¡ Riscos identificados
   â””â”€â”€ ğŸ’¡ SugestÃµes de ETAPAs futuras

================================================================================
=== ğŸ“Š RESULTADO DA ÃšLTIMA AUDITORIA ===
================================================================================

DATA: [PREENCHER APÃ“S RODAR AUDITORIA]
AUDITOR: Windsurf

RESUMO EXECUTIVO:
â”œâ”€â”€ Total de itens auditados: [X]
â”œâ”€â”€ Total de âœ… (OK): [X]
â”œâ”€â”€ Total de âš ï¸ (AtenÃ§Ã£o): [X]
â””â”€â”€ Total de âŒ (Problema): [X]

PROBLEMAS CRÃTICOS:
â”œâ”€â”€ [LISTAR APÃ“S AUDITORIA]

MELHORIAS RECOMENDADAS:
â”œâ”€â”€ [LISTAR APÃ“S AUDITORIA]

PRÃ“XIMOS PASSOS:
â”œâ”€â”€ [LISTAR APÃ“S AUDITORIA]

LÃ‚MPADA:
â”œâ”€â”€ [LISTAR APÃ“S AUDITORIA]

================================================================================
=== ğŸ“‹ CHECKLIST RÃPIDO DE AUDITORIA ===
================================================================================

ESTRUTURA:
â”œâ”€â”€ [ ] Pastas principais existem
â”œâ”€â”€ [ ] Arquivos crÃ­ticos existem
â”œâ”€â”€ [ ] Migrations em ordem

ROTAS:
â”œâ”€â”€ [ ] /dashboard funciona
â”œâ”€â”€ [ ] /dashboard-profissional funciona
â”œâ”€â”€ [ ] /aceitar-convite funciona
â”œâ”€â”€ [ ] /admin/* funciona

APIs:
â”œâ”€â”€ [ ] APIs de profissional funcionam
â”œâ”€â”€ [ ] APIs de cliente funcionam
â”œâ”€â”€ [ ] APIs de seguranÃ§a funcionam

BANCO:
â”œâ”€â”€ [ ] Tabelas existem
â”œâ”€â”€ [ ] RLS configurado
â”œâ”€â”€ [ ] Migrations rodadas

FLUXOS:
â”œâ”€â”€ [ ] Teste de clareza funciona
â”œâ”€â”€ [ ] DiÃ¡rio funciona
â”œâ”€â”€ [ ] Chat IA funciona
â”œâ”€â”€ [ ] Plano de seguranÃ§a funciona
â”œâ”€â”€ [ ] Fluxo profissional/cliente funciona

SEGURANÃ‡A:
â”œâ”€â”€ [ ] AutenticaÃ§Ã£o OK
â”œâ”€â”€ [ ] RLS OK
â”œâ”€â”€ [ ] LGPD OK

Ã‰TICA:
â”œâ”€â”€ [ ] Disclaimers OK
â”œâ”€â”€ [ ] Linguagem OK
â”œâ”€â”€ [ ] EmergÃªncia OK

DOCUMENTAÃ‡ÃƒO:
â”œâ”€â”€ [ ] TXTs atualizados
â”œâ”€â”€ [ ] Manuais existem (se aplicÃ¡vel)

================================================================================
FIM DO ARQUIVO - AUDITORIA MASTER PREMIUM
================================================================================
