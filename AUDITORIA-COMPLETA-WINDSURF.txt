================================================================================
AUDITORIA COMPLETA - TODOS OS PROMPTS E PATCHES
================================================================================
Gerado em: 04/12/2025 07:20 UTC-5
Autor: ChatGPT + Eduardo
Para: Windsurf verificar e implementar

INSTRUÃ‡ÃƒO: Cole este arquivo inteiro no Windsurf.
Para cada PROMPT e PATCH, o Windsurf deve responder:
- IMPLEMENTADO (100%)
- PARCIAL (X%) - listar o que falta
- NÃƒO IMPLEMENTADO - implementar agora

================================================================================
                              4 PROMPTS
================================================================================

â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
PROMPT 1: ETAPA 7.2 â€“ PLANO DE INTEGRAÃ‡ÃƒO (PLANO DE SEGURANÃ‡A + TRIÃ‚NGULO)
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

1. DISPARO AUTOMÃTICO (Clareza â†’ Plano de SeguranÃ§a)
   - Se hasPhysicalRisk = true (categoria fisico >= 30%):
     - Salvar has_physical_risk = true em clarity_tests
     - Mostrar banner no Dashboard
     - Criar risk_alert com source='clarity_test', level='HIGH'/'CRITICAL'

2. DETECÃ‡ÃƒO VIA CHAT (regex)
   - Regex: /\b(me\s+bateu|me\s+agrediu|ameaÃ§|vai\s+me\s+matar|medo\s+de\s+morrer|violÃªncia|apanho|socou|empurrou|estrangul)/i
   - Mostrar banner: "ğŸš¨ Percebemos um possÃ­vel risco."
   - Criar risk_alert com source='chat'

3. PERSISTÃŠNCIA (Plano â†’ DiÃ¡rio)
   - Ao salvar plano, criar entrada no diÃ¡rio com entry_type='safety_plan'

4. API /api/safety-plan
   - GET: retorna plano do usuÃ¡rio
   - POST: cria novo plano
   - PATCH: atualiza plano

5. DASHBOARD
   - Card "Plano de SeguranÃ§a" com status colorido
   - Banners de alerta baseados em hasPhysicalRisk

6. BADGES NO DIÃRIO
   - Badge ğŸ›¡ï¸ para entry_type='safety_plan'

WINDSURF RESPONDA: "PROMPT 1: [IMPLEMENTADO/PARCIAL/NÃƒO IMPLEMENTADO]"

â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
PROMPT 2: ETAPA 7.3 â€“ IMPLEMENTAÃ‡ÃƒO (CODAR)
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

MISSÃƒO: Implementar integraÃ§Ã£o Plano de SeguranÃ§a + TriÃ¢ngulo de Risco

ORDEM DE IMPLEMENTAÃ‡ÃƒO:

ETAPA 1 â€“ TIPOS E SCHEMA
- Adicionar 'safety_plan' ao JournalEntryType em types/database.ts
- Verificar tabelas: clarity_tests, risk_alerts, journal_entries, safety_plans

ETAPA 2 â€“ API /api/safety-plan
- Criar app/api/safety-plan/route.ts
- GET: retorna plano do usuÃ¡rio autenticado
- POST: cria novo plano
- PATCH: atualiza plano existente
- ApÃ³s POST/PATCH: criar entrada no diÃ¡rio

ETAPA 3 â€“ PÃGINA /plano-seguranca
- Usar API /api/safety-plan (nÃ£o Supabase direto)
- Status: NOT_STARTED, IN_PROGRESS, READY

ETAPA 4 â€“ DISPARO VIA TESTE DE CLAREZA
- Em app/api/clarity/activate-profile/route.ts
- Quando hasPhysicalRisk = true: criar risk_alert

ETAPA 5 â€“ DASHBOARD
- Card "Plano de SeguranÃ§a" com Ã­cone Shield
- Banners de alerta

ETAPA 6 â€“ DETECÃ‡ÃƒO NO CHAT
- Regex em app/chat/page.tsx
- Banner + risk_alert em app/api/chat/route.ts

ETAPA 7 â€“ DIÃRIO E BADGES
- Badge ğŸ›¡ï¸ em app/diario/page.tsx
- Badge ğŸ›¡ï¸ em app/diario/timeline/page.tsx

WINDSURF RESPONDA: "PROMPT 2: [IMPLEMENTADO/PARCIAL/NÃƒO IMPLEMENTADO]"

â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
PROMPT 3: MAPEAMENTO COMPLETO DO PROJETO
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

ETAPA 1 â€“ LEITURA GERAL
- Listar docs: README, TUDO_PARA_O_GPT.txt, ATLAS, ROADMAP, LAMPADA, TESTES
- Listar pastas: app/, lib/, components/, database/, docs/

ETAPA 2 â€“ MAPA DA ARQUITETURA
- Stack: Next.js 16, TypeScript, Tailwind, Supabase, Stripe, Vercel
- MÃ³dulos: landing, dashboard, diÃ¡rio, chat, admin, etc.
- Banco: tabelas principais e relaÃ§Ãµes

ETAPA 3 â€“ CLASSIFICAR
- IMPLEMENTADO / PARCIAL / PLANEJADO

ETAPA 4 â€“ CRIAR RESUMO BASE
- VisÃ£o geral, stack, mÃ³dulos, banco, prÃ³ximos passos

WINDSURF RESPONDA: "PROMPT 3: [IMPLEMENTADO/PARCIAL/NÃƒO IMPLEMENTADO]"

â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
PROMPT 4: MEGA PROMPT DE AUDITORIA GERAL
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

ETAPA A â€“ LEITURA DOS DOCS
- TUDO PARA O GPT.txt
- ATLAS-RADAR-NARCISISTA.txt
- ROADMAP-RADAR.txt
- LAMPADA-RADAR.txt
- docs/PATCH-ORACULO.md
- docs/REGRAS-COMUNICACAO-IA.md
- CHECKLIST-POS-MVP.md

ETAPA B â€“ AUDITORIA DOS REQUISITOS
- Verificar cada requisito no cÃ³digo
- Classificar: IMPLEMENTADO / PARCIAL / NÃƒO IMPLEMENTADO
- Implementar o que falta

ETAPA C â€“ MATRIZ GLOBAL DE IAs
Tabelas:
- ai_providers
- ai_menus
- ai_menu_providers
- ai_plan_overrides
- ai_usage_logs

CÃ³digo:
- lib/ai-router.ts

UI Admin:
- /admin/ia-matrix
- /admin/ia-analytics

ETAPA D â€“ MODO SIMULAÃ‡ÃƒO
- Admin simula: usuÃ¡ria, profissional, whitelabel
- Tabela impersonation_sessions
- Banner "VocÃª estÃ¡ simulando X"

ETAPA E â€“ HELP POR MENU
- Tabela admin_menu_help
- BotÃ£o "?" em cada menu

ETAPA F â€“ ORGANIZAÃ‡ÃƒO DO MENU ADMIN
- FUNDAMENTAL: planos, usuÃ¡rios, billing, IA
- PRODUTO: diÃ¡rio, teste de clareza
- CONTEÃšDO: curadoria, biblioteca
- EXPERIMENTAL: beta
- SISTEMA: frontpage, config

ETAPA G â€“ SINCRONIZAÃ‡ÃƒO COM GERADOR DE SAAS
- Documentar CORE COMPARTILHADO

WINDSURF RESPONDA: "PROMPT 4: [IMPLEMENTADO/PARCIAL/NÃƒO IMPLEMENTADO]"

================================================================================
                              9 PATCHES
================================================================================

â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
PATCH 1: JournalEntryType NA TIMELINE
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

Problema: Timeline nÃ£o reconhece 'safety_plan'
Arquivo: app/diario/timeline/page.tsx (linha 82)
SoluÃ§Ã£o: Adicionar 'safety_plan' Ã  definiÃ§Ã£o local do tipo

WINDSURF RESPONDA: "PATCH 1: [IMPLEMENTADO/PARCIAL/NÃƒO IMPLEMENTADO]"

â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
PATCH 2: BLOCO 21-25 PÃ“S-MVP
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

ETAPA 21 â€“ Billing SÃ³lido & Add-ons:
- Tabela user_addons + RLS
- Webhook Stripe
- APIs /api/addons e /api/addons/consume
- lib/user-addons.ts

ETAPA 22 â€“ OrÃ¡culo V2 Integrado:
- API /api/oraculo-v2
- Tabela oraculo_logs + migration
- OraculoButton.tsx
- docs/ORACULO-V2-PROMPT.md

ETAPA 23 â€“ SeguranÃ§a TÃ©cnica:
- lib/rate-limit.ts
- lib/logger.ts
- /api/health

ETAPA 24 â€“ Manuais:
- 5 manuais atualizados (USUÃRIA, PROFISSIONAL, ADMIN, DEV, WHITELABEL)

ETAPA 25 â€“ QA TÃ©cnico:
- CHECKLIST-POS-MVP.md

WINDSURF RESPONDA: "PATCH 2: [IMPLEMENTADO/PARCIAL/NÃƒO IMPLEMENTADO]"

â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
PATCH 3: ORÃCULO â€“ CORREÃ‡ÃƒO CONCEITUAL
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

BLOCO 21-25 (ATUAL):
- ORÃCULO V1 = painel /admin/oraculo â†’ sÃ³ ADMIN
- ORÃCULO V2 = IA de suporte â†’ apenas ADMIN neste bloco

BLOCO 26-30 (FUTURO):
- ORÃCULO V2 MULTIPERFIL para todos os perfis
- ORACULO_V2_CORE como mÃ³dulo compartilhado

REGRA: Se texto antigo disser "OrÃ¡culo para usuÃ¡ria AGORA"
â†’ ENTENDER COMO: "FUTURO BLOCO 26-30"

Arquivo: docs/PATCH-ORACULO.md

WINDSURF RESPONDA: "PATCH 3: [IMPLEMENTADO/PARCIAL/NÃƒO IMPLEMENTADO]"

â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
PATCH 4: REGRAS DE COMUNICAÃ‡ÃƒO WINDSURF â†” CHATGPT
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

Arquivo: docs/REGRAS-COMUNICACAO-IA.md

Regras:
1. SugestÃµes aparecem ANTES da execuÃ§Ã£o
2. "Melhorias opcionais" vira "MELHORIAS IDENTIFICADAS"
3. Proibido usar "ou" em "PrÃ³xima aÃ§Ã£o sugerida"
4. Windsurf escreve resumos em formato padrÃ£o

WINDSURF RESPONDA: "PATCH 4: [IMPLEMENTADO/PARCIAL/NÃƒO IMPLEMENTADO]"

â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
PATCH 5: ORGANIZAÃ‡ÃƒO DOS BLOCOS 10-40
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

BLOCO 21-25 (FECHADO):
- 21: Billing & Add-ons
- 22: OrÃ¡culo V2 Integrado
- 23: SeguranÃ§a & Observabilidade
- 24: Manuais & Links
- 25: QA TÃ©cnico

BLOCO 26-30 (FUTURO):
- 26: OrÃ¡culo V2 multiperfil
- 27: ORACULO_V2_CORE + Gerador de SaaS
- 28: Limites e billing do OrÃ¡culo
- 29: Logging avanÃ§ado
- 30: DocumentaÃ§Ã£o OrÃ¡culo + Gerador

BLOCO 31-35 (FUTURO):
- 31: Painel central de IAs
- 32: Matriz IA Ã— Menu Ã— Plano Ã— Perfil
- 33: Avatares / Personas de IA
- 34: Menus do Admin + HELP
- 35: Modo simulaÃ§Ã£o

BLOCO 36-40 (FUTURO):
- 36: Gerador de SaaS: MÃ£e com tema
- 37: Gerador de SaaS: Em branco
- 38: Admin externo Ãºnico (hub)
- 39: GestÃ£o de planos avanÃ§ados
- 40: DocumentaÃ§Ã£o de clonagem

WINDSURF RESPONDA: "PATCH 5: [IMPLEMENTADO/PARCIAL/NÃƒO IMPLEMENTADO]"

â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
PATCH 6: GERENCIAMENTO DE IAs POR MENU / PLANO / PERFIL
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

REQUISITOS:
- Ver TODAS as IAs cadastradas (OpenAI, Claude, Together, Grok, etc.)
- Ligar/desligar IA por MENU, PERFIL, PLANO
- Painel de carga/uso das IAs

TABELAS A CRIAR:
- ai_providers (id, key, nome_exibicao, status, custo_estimado)
- ai_menus (id, menu_key, descricao)
- ai_menu_providers (id, menu_id, provider_id, modo, peso, ativo)
- ai_plan_overrides (id, plan_key, menu_key, provider_id, limite_diario)
- ai_usage_logs (id, user_id, menu_key, provider_key, tokens_in, tokens_out)

CÃ“DIGO A CRIAR:
- lib/ai-router.ts
  - getProvidersForMenu()
  - callAIForMenu()
  - callCollaborativeAI()

UI ADMIN:
- /admin/configurar-ias
- /admin/ia-matrix
- /admin/ia-analytics

WINDSURF RESPONDA: "PATCH 6: [IMPLEMENTADO/PARCIAL/NÃƒO IMPLEMENTADO]"

â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
PATCH 7: MENU ADMIN + HELP POR MENU
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

ESTRUTURA DO MENU (8 GRUPOS, 55 ITENS):

1. VisÃ£o Geral & Controle (9 itens)
   - Dashboard Admin, EstatÃ­sticas, Logs, OrÃ¡culo, SimulaÃ§Ã£o, etc.

2. Pessoas & Acessos (5 itens)
   - UsuÃ¡rios, Profissionais, Admins, Convites, PermissÃµes

3. Planos, Billing & PromoÃ§Ãµes (5 itens)
   - Planos, PreÃ§os, Cupons, PromoÃ§Ãµes, RelatÃ³rios

4. IAs & OrquestraÃ§Ã£o (10 itens)
   - Provedores, Matriz, Personas, Analytics, Limites, etc.

5. Produto & Funcionalidades (7 itens)
   - DiÃ¡rio, Chat, Teste de Clareza, Plano de SeguranÃ§a, etc.

6. Front & ConteÃºdos (8 itens)
   - Frontpage, Blog, FAQ, Biblioteca, Curadoria, etc.

7. GovernanÃ§a & LGPD (5 itens)
   - Termos, Privacidade, Consentimentos, ExportaÃ§Ã£o, ExclusÃ£o

8. LaboratÃ³rio & Dev (6 itens)
   - Beta Features, Easter Eggs, A/B Testing, Webhooks, etc.

HELP POR MENU:
- Arquivo: lib/menu-help-registry.ts
- BotÃ£o "?" em cada menu
- Modal com explicaÃ§Ã£o leiga

ARQUIVOS:
- lib/admin-core-menu.ts (estrutura do menu)
- lib/menu-help-registry.ts (textos de ajuda)
- docs/MENU-HELP-ADMIN.md (documentaÃ§Ã£o)

WINDSURF RESPONDA: "PATCH 7: [IMPLEMENTADO/PARCIAL/NÃƒO IMPLEMENTADO]"

â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
PATCH 8: AVATARES / PERSONAS DE IA
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

CONCEITO:
- UsuÃ¡ria vÃª "Dra. Clara" (nÃ£o "Claude")
- Cada persona tem nome, avatar, tom de voz

TABELAS:
- ai_personas (id, slug, display_name, avatar_url, tone, description)
- ai_persona_bindings (id, persona_id, provider_id, menu_key)

CÃ“DIGO:
- lib/ai-personas.ts
- getSafeDisplayForUser() - retorna persona, nÃ£o provider

UI:
- Admin configura personas em /admin/ia-personas
- UsuÃ¡ria vÃª persona (nÃ£o provider)

MIGRATION: database/migrate-ai-personas.sql

WINDSURF RESPONDA: "PATCH 8: [IMPLEMENTADO/PARCIAL/NÃƒO IMPLEMENTADO]"

â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
PATCH 9: MODO SIMULAÃ‡ÃƒO / IMPERSONATION
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

REQUISITOS:
- Admin pode simular: usuÃ¡ria, profissional, whitelabel, gerador
- Banner fixo: "VocÃª estÃ¡ simulando X"
- BotÃ£o "Encerrar simulaÃ§Ã£o"
- Log de todas as simulaÃ§Ãµes

TABELA:
- impersonation_sessions
  - id, admin_id, target_user_id, target_role, target_tenant_id
  - started_at, ended_at, reason

CÃ“DIGO:
- lib/impersonation.ts
  - startImpersonation()
  - endImpersonation()
  - getEffectiveSession()
  - ensureNotImpersonatingForDangerousAction()

- components/ImpersonationBanner.tsx
  - Banner fixo no topo
  - Mostra quem estÃ¡ sendo simulado
  - BotÃ£o "Encerrar simulaÃ§Ã£o"

- /api/admin/impersonation
  - POST: iniciar simulaÃ§Ã£o
  - DELETE: encerrar simulaÃ§Ã£o

UI:
- /admin/simulacao
  - Buscar usuÃ¡rio
  - Selecionar perfil
  - Iniciar simulaÃ§Ã£o

SEGURANÃ‡A:
- AÃ§Ãµes destrutivas bloqueadas em modo simulaÃ§Ã£o
- Logs registram que foi simulaÃ§Ã£o
- Cookie rn_impersonation com dados da sessÃ£o

MIGRATION: database/migrate-impersonation.sql

WINDSURF RESPONDA: "PATCH 9: [IMPLEMENTADO/PARCIAL/NÃƒO IMPLEMENTADO]"

================================================================================
                         CHECKLIST FINAL
================================================================================

PROMPTS:
[ ] PROMPT 1: Etapa 7.2 - Plano de IntegraÃ§Ã£o
[ ] PROMPT 2: Etapa 7.3 - ImplementaÃ§Ã£o
[ ] PROMPT 3: Mapeamento do Projeto
[ ] PROMPT 4: Mega Prompt de Auditoria

PATCHES:
[ ] PATCH 1: JournalEntryType Timeline
[ ] PATCH 2: BLOCO 21-25 PÃ³s-MVP
[ ] PATCH 3: OrÃ¡culo CorreÃ§Ã£o Conceitual
[ ] PATCH 4: Regras de ComunicaÃ§Ã£o
[ ] PATCH 5: OrganizaÃ§Ã£o Blocos 10-40
[ ] PATCH 6: IAs por Menu/Plano/Perfil
[ ] PATCH 7: Menu Admin + Help
[ ] PATCH 8: Avatares/Personas
[ ] PATCH 9: Modo SimulaÃ§Ã£o

================================================================================
WINDSURF: APÃ“S VERIFICAR TUDO, GERE UM RESUMO COM:

1. STATUS DE CADA PROMPT (1-4)
2. STATUS DE CADA PATCH (1-9)
3. LISTA DO QUE FALTA IMPLEMENTAR
4. IMPLEMENTAR O QUE FALTA AGORA

================================================================================
FIM DO ARQUIVO DE AUDITORIA COMPLETA
================================================================================
