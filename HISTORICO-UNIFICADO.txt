================================================================================
HISTÃ“RICO UNIFICADO - RADAR NARCISISTA
================================================================================
LEIA ESTE ARQUIVO PRIMEIRO AO ABRIR O PROJETO!

Ãšltima atualizaÃ§Ã£o: 04/12/2025 19:20 UTC-5
Autoria: Windsurf + ChatGPT + Eduardo

================================================================================
COMANDO ESPECIAL: "HISTÃ“RICO"
================================================================================
Quando Eduardo disser "HISTÃ“RICO", o Windsurf deve:
1. Ler este arquivo completamente + FUTURO-TERMINAR-IMPLEMENTACAO.TXT
2. Confirmar: "Acessei o HISTORICO-UNIFICADO.txt e entendi o contexto."
3. Continuar de onde parou

================================================================================
VISÃƒO GERAL DO PROJETO
================================================================================

NOME: Radar Narcisista
TIPO: SaaS para vÃ­timas de abuso narcisista
STACK: Next.js 16 + Supabase + Stripe + IA (OpenAI/Anthropic)
REPO: https://github.com/edueduardo/radar-narcisista
DEPLOY: Vercel (automÃ¡tico via push)

ALMA DO PROJETO:
"Uma ferramenta segura, Ã©tica e forense-amigÃ¡vel para vÃ­timas de abuso 
narcisista ganharem clareza, registro organizado e proteÃ§Ã£o, com apoio 
de IA, sem mentir para elas."

O TRIÃ‚NGULO (3 PILARES):
1. TESTE DE CLAREZA - nomear o abuso, psicoeducaÃ§Ã£o, scores
2. DIÃRIO / TIMELINE - registro cronolÃ³gico, tags, valor probatÃ³rio
3. CHAT IA - NÃƒO gaslighta, NÃƒO diagnÃ³stico, orienta buscar ajuda real

================================================================================
ARQUIVOS-CHAVE DO PROJETO
================================================================================

DOCUMENTAÃ‡ÃƒO:
â”œâ”€â”€ FUTURO-TERMINAR-IMPLEMENTACAO.txt (~7747 linhas) - Plano mestre
â”œâ”€â”€ HISTORICO-UNIFICADO.txt (este arquivo) - HistÃ³rico da conversa
â”œâ”€â”€ ATLAS-RADAR-NARCISISTA.txt - Mapa tÃ©cnico do projeto
â”œâ”€â”€ ROADMAP-RADAR.txt - Tarefas e status
â”œâ”€â”€ TUDO PARA O GPT.txt - VisÃ£o de produto
â”œâ”€â”€ ESPELHO-CODIGO-RADAR.txt - Mapa de arquivos
â””â”€â”€ BACKUP-CHAT-RADAR-2025-12-03.txt - Backup do chat

CÃ“DIGO PRINCIPAL:
â”œâ”€â”€ lib/plan-taxonomy.ts - Taxonomia de planos
â”œâ”€â”€ lib/plan-dashboard-modules.ts - MÃ³dulos do dashboard
â”œâ”€â”€ lib/dashboard-user-layout.ts - Layout e heurÃ­stica do herÃ³i
â”œâ”€â”€ app/dashboard/page.tsx - Dashboard da usuÃ¡ria
â””â”€â”€ app/dashboard/page.BACKUP_ETAPA11.tsx - Backup do dashboard

================================================================================
METODOLOGIA: MUNDOS-MESCLADOS (GPT + WINDSURF)
================================================================================

ğŸ”µ PASSO=GPT (ChatGPT faz):
â”œâ”€â”€ Organizar ETAPAs, prioridades, riscos
â”œâ”€â”€ Definir mÃ³dulos, trilha do herÃ³i, add-ons, dashboards
â”œâ”€â”€ Escrever prompts mestres para o Windsurf
â””â”€â”€ Auditar o que foi implementado

ğŸŸ£ PASSO-WINDSURF (Windsurf executa):
â”œâ”€â”€ Criar/alterar arquivos .ts, .tsx, schema.sql
â”œâ”€â”€ Rodar migrations, build, git, deploy
â”œâ”€â”€ Seguir o prompt do PASSO=GPT linha por linha
â””â”€â”€ Devolver resumo: arquivos criados, build ok, ETAPA concluÃ­da

ğŸŸ¡ MUNDOS-MESCLADOS (Ciclo completo):
1. Eduardo traz ideia / problema / prÃ³xima etapa
2. PASSO=GPT: organiza ETAPA em linguagem Windsurf
3. Eduardo copia o prompt e joga no Windsurf
4. PASSO-WINDSURF: executa e devolve log
5. Eduardo cola resultado no GPT
6. PASSO=GPT: audita, confere, define prÃ³ximo passo

================================================================================
CAMINHO ESCOLHIDO: CAMINHO 2 (MODERADO)
================================================================================

Radar continua prioridade, Engine vai nas "dobras" do processo.

JUSTIFICATIVA:
â”œâ”€â”€ Infra de mÃ³dulos/planos jÃ¡ estÃ¡ pronta
â”œâ”€â”€ Adicionar project_id Ã© 1-2 dias de trabalho
â””â”€â”€ Radar Ã© prioridade, mas nÃ£o ficamos "cegos" para o futuro

================================================================================
ETAPAS IMPLEMENTADAS (STATUS ATUAL)
================================================================================

âœ… IMPLEMENTADO (MVP 1.0 CONCLUÃDO):
â”œâ”€â”€ ETAPA 8.1-8.4 â€“ FanPage Viva
â”œâ”€â”€ ETAPA 9 â€“ Curadoria + SemÃ¡foro
â”œâ”€â”€ ETAPA 10 â€“ Taxonomia de Planos
â”œâ”€â”€ ETAPA 11 â€“ Trilha do HerÃ³i (infra)
â”œâ”€â”€ ETAPA 11.1 â€“ Trilha Visual no Dashboard
â”œâ”€â”€ ETAPA 11.2 â€“ Ajustes Finos Dashboard
â”œâ”€â”€ ETAPA 12 â€“ Dashboard Profissional V1
â”œâ”€â”€ ETAPA 12.1 â€“ Infra Clientes Profissionais
â”œâ”€â”€ ETAPA 12.1.1 â€“ PÃ¡gina Aceite Convite
â”œâ”€â”€ ETAPA 12.1.2 â€“ RevogaÃ§Ã£o de Acesso
â”œâ”€â”€ ETAPA 12.2 â€“ RelatÃ³rio BÃ¡sico por Cliente
â”œâ”€â”€ ETAPA 12.3 â€“ ExportaÃ§Ã£o CSV
â”œâ”€â”€ ETAPA 13 â€“ Infra White-Label V1
â”œâ”€â”€ ETAPA 14 â€“ Loja Simplificada âœ…
â”œâ”€â”€ ETAPA 15 â€“ Beta com 5 UsuÃ¡rias âœ…
â”œâ”€â”€ ETAPA 16 â€“ OrÃ¡culo V1 âœ…
â”œâ”€â”€ ETAPA 17 â€“ Limpeza Dashboards âœ…
â”œâ”€â”€ ETAPA 18 â€“ Limpeza Admin âœ…
â”œâ”€â”€ ETAPA 19 â€“ Manuais (5 arquivos) âœ…
â””â”€â”€ ETAPA 20 â€“ LÃ¢mpada Geral âœ…

ğŸ”œ PRÃ“XIMO (BLOCO 21-25 PÃ“S-MVP):
â”œâ”€â”€ ETAPA 21 â€“ Billing SÃ³lido & Add-ons (Stripe + user_addons)
â”œâ”€â”€ ETAPA 22 â€“ ORÃCULO V2 Integrado (IA + Logs + BotÃ£o)
â”œâ”€â”€ ETAPA 23 â€“ SeguranÃ§a TÃ©cnica (Logs + Rate Limit)
â”œâ”€â”€ ETAPA 24 â€“ Manuais & Links Internos
â””â”€â”€ ETAPA 25 â€“ QA TÃ©cnico + Checklist PÃ³s-MVP

â³ FUTURO (BLOCO 26-30):
â”œâ”€â”€ ENGINE.1-5 â€“ Motor Replicador
â””â”€â”€ FABRICA.1-5 â€“ FÃ¡brica de SaaS

================================================================================
DETALHES DA ETAPA 11.2 (ÃšLTIMA CONCLUÃDA)
================================================================================

RESULTADO:
â”œâ”€â”€ FunÃ§Ã£o getCurrentHeroStep() com heurÃ­stica inteligente
â”œâ”€â”€ MicrocÃ³pias refinadas em HERO_STEP_LABELS
â”œâ”€â”€ Badge "VocÃª estÃ¡ aqui" no passo atual
â”œâ”€â”€ Passos completados mostram âœ“ verde
â”œâ”€â”€ Mobile: scroll horizontal edge-to-edge
â””â”€â”€ Build: 145 pÃ¡ginas

HEURÃSTICA DO PASSO ATUAL:
â”œâ”€â”€ Se NUNCA fez teste de clareza â†’ passo = "Entender"
â”œâ”€â”€ Se jÃ¡ fez teste, mas poucos registros no diÃ¡rio â†’ passo = "Registrar"
â”œâ”€â”€ Se jÃ¡ tem diÃ¡rio ativo, mas pouco uso de chat â†’ passo = "Conversar"
â”œâ”€â”€ Se jÃ¡ usou chat e tem indicaÃ§Ã£o de risco â†’ passo = "Proteger"
â””â”€â”€ Se jÃ¡ passou por tudo â†’ passo = "Recursos"
EXCEÃ‡ÃƒO: Risco fÃ­sico sem plano pronto â†’ forÃ§a Passo 4 (Proteger)

================================================================================
PRÃ“XIMA ETAPA: ETAPA 12 (DASHBOARD PROFISSIONAL V1)
================================================================================

OBJETIVO:
Criar a primeira versÃ£o do Dashboard Profissional (B2B), separado do dashboard
da usuÃ¡ria, com:
â”œâ”€â”€ Rota prÃ³pria: /dashboard-profissional
â”œâ”€â”€ Gating por plano (sÃ³ plano "Profissional" acessa)
â”œâ”€â”€ Layout mÃ­nimo com seÃ§Ãµes bÃ¡sicas
â””â”€â”€ Estrutura para futuras funcionalidades

SEÃ‡Ã•ES DO DASHBOARD PROFISSIONAL:
â”œâ”€â”€ (A) Header / Boas-vindas Profissional
â”œâ”€â”€ (B) VisÃ£o geral (cards)
â”œâ”€â”€ (C) Painel de clientes (estrutura)
â””â”€â”€ (D) PrÃ³ximos passos (texto guia)

REGRAS:
â”œâ”€â”€ NÃƒO criar migrations agora
â”œâ”€â”€ NÃƒO inventar tabelas no banco
â”œâ”€â”€ Se nÃ£o existir tabela de clientes â†’ UI com mock
â”œâ”€â”€ Registrar tarefas futuras no ROADMAP
â””â”€â”€ NÃƒO quebrar dashboard da usuÃ¡ria

================================================================================
REGRAS FUNDAMENTAIS (NUNCA QUEBRAR)
================================================================================

âŒ NÃƒO FAZER:
â”œâ”€â”€ Testes/QA durante a construÃ§Ã£o
â”œâ”€â”€ Pensar em "MVP pequenininho"
â”œâ”€â”€ Focar em polimento antes de terminar
â”œâ”€â”€ Pular etapas na sequÃªncia
â”œâ”€â”€ Deletar conteÃºdo antigo dos TXTs
â””â”€â”€ Mexer em fluxos crÃ­ticos sem autorizaÃ§Ã£o

âœ… FAZER:
â”œâ”€â”€ Construir o sistema INTEIRO com toda a infraestrutura
â”œâ”€â”€ Implementar todas as features planejadas
â”œâ”€â”€ Seguir a sequÃªncia lÃ³gica de ETAPAs
â”œâ”€â”€ Sempre acrescentar, nunca apagar
â”œâ”€â”€ Git + push apÃ³s cada alteraÃ§Ã£o
â””â”€â”€ Atualizar este HISTÃ“RICO apÃ³s cada sessÃ£o

================================================================================
SEMÃFORO DE EDIÃ‡ÃƒO
================================================================================

ğŸŸ¢ ZONA VERDE (pode editar com liberdade):
â”œâ”€â”€ ConteÃºdos publicados (content_items)
â”œâ”€â”€ FAQs, Artigos, Radar Academy
â””â”€â”€ ColeÃ§Ãµes/trilhas

ğŸŸ¡ ZONA AMARELA (editar com cuidado):
â”œâ”€â”€ SugestÃµes da IA Curadora
â”œâ”€â”€ MÃ©tricas / insights
â””â”€â”€ Planos / billing

ğŸ”´ ZONA VERMELHA (NÃƒO mexer):
â”œâ”€â”€ TriÃ¢ngulo: Teste de Clareza, DiÃ¡rio, Chat/Coach, Plano de SeguranÃ§a
â”œâ”€â”€ Prompts de IA sensÃ­veis
â”œâ”€â”€ Regras de LGPD, hash, logs, seguranÃ§a
â””â”€â”€ Qualquer coisa marcada como "crÃ­tico"

================================================================================
COMMITS RECENTES (SESSÃƒO 04/12/2025 03:20 UTC-5)
================================================================================

df956c2 - BLOCO 21-25 COMPLETO - Billing + Oraculo V2 + Seguranca + Manuais + QA
8ade23b - ORACULO V2 EXPANDIDO - Prompt completo + SQL + API route + Componente React
5e2487a - ORACULO V2 COMPLETO - Plano de implementacao + Prompt + SQL + Melhorias manuais
b6d5ac1 - BLOCO 14-20 CONCLUIDO - MVP 1.0 PRONTO! Documentacao completa

================================================================================
SESSÃƒO 04/12/2025 â€“ RESUMO
================================================================================

O QUE FOI FEITO:
â”œâ”€â”€ MVP 1.0 CONCLUÃDO (ETAPAs 1-20)
â”œâ”€â”€ BLOCO 14-20 documentado e fechado
â”œâ”€â”€ ORÃCULO V2 planejado completamente:
â”‚   â”œâ”€â”€ Prompt SYSTEM completo
â”‚   â”œâ”€â”€ SQL Migration oraculo_logs
â”‚   â”œâ”€â”€ Esqueleto API /api/oraculo-v2
â”‚   â””â”€â”€ Componente AskOracleButton.tsx
â”œâ”€â”€ BLOCO 21-25 definido:
â”‚   â”œâ”€â”€ ETAPA 21 â€“ Billing (user_addons + Stripe)
â”‚   â”œâ”€â”€ ETAPA 22 â€“ OrÃ¡culo V2 Integrado
â”‚   â”œâ”€â”€ ETAPA 23 â€“ SeguranÃ§a TÃ©cnica
â”‚   â”œâ”€â”€ ETAPA 24 â€“ Manuais & Links
â”‚   â””â”€â”€ ETAPA 25 â€“ QA TÃ©cnico
â””â”€â”€ FUTURO-TERMINAR-IMPLEMENTACAO.txt atualizado (~11.428 linhas)

CONTAGEM DE ETAPAS:
â”œâ”€â”€ ANTES: 96 etapas
â””â”€â”€ AGORA: 101 etapas (+5 do BLOCO 31-35: ETAPAS 31, 32, 33, 34, 35)

================================================================================
BLOCO 21-25 IMPLEMENTADO COM SUCESSO! (MVP 1.0.25)
================================================================================

ETAPAS IMPLEMENTADAS PELO WINDSURF:
â”œâ”€â”€ ETAPA 21 â€“ Billing SÃ³lido & Add-ons (commit fe61cb1)
â”œâ”€â”€ ETAPA 22 â€“ OrÃ¡culo V2 Integrado (commit 0718c7c)
â”œâ”€â”€ ETAPA 23 â€“ SeguranÃ§a TÃ©cnica & Observabilidade (commit 31d6a2b)
â”œâ”€â”€ ETAPA 24 â€“ Manuais & Links Internos (commit 52e0458)
â””â”€â”€ ETAPA 25 â€“ QA TÃ©cnico + Checklist PÃ³s-MVP (commit 9275f78)

ARQUIVOS CRIADOS:
â”œâ”€â”€ database/migrate-user-addons.sql
â”œâ”€â”€ database/migrate-oraculo-logs.sql
â”œâ”€â”€ lib/user-addons.ts
â”œâ”€â”€ lib/rate-limit.ts
â”œâ”€â”€ lib/logger.ts
â”œâ”€â”€ app/api/addons/route.ts
â”œâ”€â”€ app/api/addons/consume/route.ts
â”œâ”€â”€ app/api/oraculo-v2/route.ts
â”œâ”€â”€ app/api/health/route.ts
â”œâ”€â”€ components/OraculoButton.tsx
â”œâ”€â”€ docs/ORACULO-V2-PROMPT.md
â”œâ”€â”€ docs/PATCH-ORACULO.md
â”œâ”€â”€ docs/REGRAS-COMUNICACAO-IA.md
â””â”€â”€ CHECKLIST-POS-MVP.md

PENDÃŠNCIAS PARA PRODUÃ‡ÃƒO:
â”œâ”€â”€ Executar migrations no Supabase
â”œâ”€â”€ Configurar Stripe (Price IDs para add-ons)
â””â”€â”€ Testes manuais (pagamento, OrÃ¡culo V2, healthcheck)

================================================================================
SESSÃƒO 04/12/2025 04:30 UTC-5 â€“ RESUMO COMPLETO
================================================================================

PATCHES APLICADOS:
â”œâ”€â”€ PATCH 1 â€“ OrÃ¡culo V2 sÃ³ ADMIN (BLOCO 21-25)
â”œâ”€â”€ PATCH 2 â€“ OrÃ¡culo V2 MULTIPERFIL + GERADOR DE SAAS (BLOCO 26-30)
â”œâ”€â”€ PATCH 3A â€“ Controle por plano/perfil + limites de uso
â”œâ”€â”€ PATCH 3B â€“ ETAPA 31 â€“ Reforma Front Page
â”œâ”€â”€ PATCH 4 â€“ ETAPA 32 â€“ Matriz OrÃ¡culo V1/V2 multi-instÃ¢ncia
â””â”€â”€ REGRA FIXA â€“ DocumentaÃ§Ã£o obrigatÃ³ria para ETAPAS 21-32

CONSTITUIÃ‡ÃƒO & NORTE:
â”œâ”€â”€ HERÃ“I DA HISTÃ“RIA: A USUÃRIA FINAL
â”œâ”€â”€ ARTIGO 1: OrÃ¡culo V1 = painel admin, NUNCA para usuÃ¡ria/profissional
â”œâ”€â”€ ARTIGO 2: OrÃ¡culo V2 = suporte ao uso, NUNCA diagnÃ³stico
â”œâ”€â”€ ARTIGO 3: InstÃ¢ncias separadas, dados nÃ£o se misturam
â””â”€â”€ ARTIGO 4: O app NUNCA promete diagnÃ³stico/resultado jurÃ­dico

MATRIZ ORÃCULO:
â”œâ”€â”€ Radar Mestre: usuÃ¡ria/profissional â†’ sÃ³ V2 | admin â†’ V1+V2
â”œâ”€â”€ Whitelabel: admin do parceiro â†’ V1 (dados dele) + V2
â””â”€â”€ Gerador SaaS: opÃ§Ã£o de incluir V1 e/ou V2 na criaÃ§Ã£o

================================================================================
PRÃ“XIMOS PASSOS (BLOCO 21-32)
================================================================================

| ETAPA | Nome | Foco |
|-------|------|------|
| 21 | Billing SÃ³lido & Add-ons | Stripe + user_addons |
| 22 | ORÃCULO V2 Integrado | IA + Logs + BotÃ£o (sÃ³ admin) |
| 23 | SeguranÃ§a TÃ©cnica | Logs + Rate Limit |
| 24 | Manuais & Links | Produto = DocumentaÃ§Ã£o |
| 25 | QA TÃ©cnico | Checklist PÃ³s-MVP 1.0 |
| 26-30 | ORÃCULO V2 MULTIPERFIL | Todos os perfis + controle |
| 31-35 | CATÃLOGO DE PLANOS | Features + Perfis + Cohorts |

BLOCO 31-35 â€“ CATÃLOGO DE PLANOS, PERFIS E COHORTS:
â”œâ”€â”€ ETAPA 31 â€“ Modelar tabelas (features, feature_profiles, plan_catalog)
â”œâ”€â”€ ETAPA 32 â€“ Migrar planos atuais para perfis explÃ­citos
â”œâ”€â”€ ETAPA 33 â€“ Criar suporte a promoÃ§Ãµes/cohorts
â”œâ”€â”€ ETAPA 34 â€“ Criar overrides individuais por usuÃ¡rio
â””â”€â”€ ETAPA 35 â€“ Conectar front page + admin de planos

PATCH 5 â€“ PLANOS & FEATURES:
â”œâ”€â”€ Problema: "Plano" Ã© tratado como botÃ£o global que muda todo mundo igual
â”œâ”€â”€ SoluÃ§Ã£o: Separar FEATURES (recursos) de PERFIS (pacotes de features)
â”œâ”€â”€ Cada cliente compra um PERFIL especÃ­fico, nÃ£o um "plano genÃ©rico"
â”œâ”€â”€ PromoÃ§Ãµes = perfis diferentes (profissional_bf_2025, free_promo_natal)
â””â”€â”€ ExceÃ§Ãµes individuais = overrides por usuÃ¡rio

REGRA CRÃTICA: ADMIN + DASHBOARD = GERADOR DE SAAS:
â”œâ”€â”€ Tudo que for verdade no ADMIN do Radar â†’ vira matÃ©ria-prima do GERADOR DE SAAS
â”œâ”€â”€ Tudo que for verdade no DASHBOARD do Radar â†’ vira matÃ©ria-prima do GERADOR DE SAAS
â””â”€â”€ "No administrador, eu tenho isso" = "Isso tambÃ©m existe no GERADOR DE SAAS"

MÃ“DULOS COMPARTILHADOS (CORES):
â”œâ”€â”€ ORACULO_V2_CORE â†’ IA de suporte reutilizÃ¡vel
â”œâ”€â”€ PLANOS_CORE â†’ Sistema de features/perfis/cohorts reutilizÃ¡vel
â””â”€â”€ [FUTUROS] â†’ Outros mÃ³dulos seguem a mesma lÃ³gica

PATCH 6 â€“ GERADOR DE SAAS & SAAS GERADOS:
â”œâ”€â”€ RADAR-CORE = projeto mÃ£e, guarda os mÃ³dulos CORE
â”œâ”€â”€ GERADOR DE SAAS = usa o RADAR-CORE como blueprint para criar NOVOS SaaS
â”œâ”€â”€ Cada SAAS GERADO nasce:
â”‚   â”œâ”€â”€ Com cÃ³digo prÃ³prio
â”‚   â”œâ”€â”€ Com docs prÃ³prios (TUDO / ATLAS / ROADMAP / TESTES / LÃ‚MPADA)
â”‚   â””â”€â”€ Independente de updates automÃ¡ticos do Radar
â”œâ”€â”€ KIT MÃNIMO DE DOCS para cada SaaS gerado:
â”‚   â”œâ”€â”€ TUDO PARA O GPT - <NOME-DO-SAAS>.txt
â”‚   â”œâ”€â”€ ATLAS-<NOME-DO-SAAS>.txt
â”‚   â”œâ”€â”€ ROADMAP-<NOME-DO-SAAS>.txt
â”‚   â”œâ”€â”€ TESTES-<NOME-DO-SAAS>.txt
â”‚   â””â”€â”€ LAMPADA-<NOME-DO-SAAS>.txt
â””â”€â”€ Objetivo: dono do SaaS pode pegar o KIT, colar no ChatGPT e evoluir sozinho

PATCH 7 â€“ MÃƒE, CORE BRANCO, FILHOS (3 NÃVEIS):
â”œâ”€â”€ NÃVEL 1: RADAR-CORE (MÃƒE) â€“ Projeto principal
â”œâ”€â”€ NÃVEL 2: CORE BRANCO (Template neutro) â€“ Sem tema, infraestrutura completa
â”œâ”€â”€ NÃVEL 3: SAAS TEMÃTICOS/ÃšNICOS (Filhos) â€“ Com tema especÃ­fico
â”œâ”€â”€ TRÃŠS MODOS DO GERADOR:
â”‚   â”œâ”€â”€ MODO 1: SAAS TemÃ¡tico direto da MÃƒE
â”‚   â”œâ”€â”€ MODO 2: CORE BRANCO (neutro)
â”‚   â””â”€â”€ MODO 3: SAAS a partir de CORE BRANCO existente
â””â”€â”€ ORIGEM-CORE.txt obrigatÃ³rio em todo projeto gerado

PATCH 8 â€“ UX/UI DO GERADOR DE SAAS:
â”œâ”€â”€ O que acontece ao clicar no botÃ£o:
â”‚   â”œâ”€â”€ Backend clona template, gera projeto, cria kit de docs
â”‚   â”œâ”€â”€ Mostra card com aÃ§Ãµes (GitHub, git clone, .zip, instruÃ§Ãµes)
â”‚   â””â”€â”€ NÃƒO abre .exe, NÃƒO abre Windsurf automaticamente
â”œâ”€â”€ Fluxo prÃ¡tico:
â”‚   â”œâ”€â”€ Admin preenche formulÃ¡rio, clica em criar
â”‚   â”œâ”€â”€ Aparece card do projeto gerado
â”‚   â””â”€â”€ UsuÃ¡rio baixa/clona e abre no Windsurf
â”œâ”€â”€ Layout da pÃ¡gina /admin/gerador-saas definido
â””â”€â”€ Tabela saas_projects definida

PATCH 9 â€“ ADMIN DINÃ‚MICO (SEM DEPLOY):
â”œâ”€â”€ Regra fundamental: "Toggle/slider no admin â†’ banco â†’ sem deploy"
â”œâ”€â”€ DEPLOY = sÃ³ quando muda CÃ“DIGO
â”œâ”€â”€ PAINEL ADMIN = configuraÃ§Ã£o dinÃ¢mica (IAs, planos, features)
â”œâ”€â”€ TrÃªs camadas de config:
â”‚   â”œâ”€â”€ CAMADA 1: Global (template/mÃ£e)
â”‚   â”œâ”€â”€ CAMADA 2: Por produto/tenant
â”‚   â””â”€â”€ CAMADA 3: Por usuÃ¡rio/cliente
â”œâ”€â”€ Problema atual: tela de IAs colaborativas mostra "0 configuradas"
â”‚   â””â”€â”€ Porque tabelas de config no Supabase estÃ£o zeradas
â””â”€â”€ SoluÃ§Ã£o: conectar tela ao banco, orquestrador lÃª config do banco

BLOCO 31-35 â€“ CONFIGURAÃ‡ÃƒO DINÃ‚MICA DE IAs (PROMPT EXECUTÃVEL):
â”œâ”€â”€ ETAPA 31: Criar AI_CONFIG_CORE (5 tabelas + funÃ§Ã£o SQL + seed)
â”‚   â”œâ”€â”€ ai_providers_core
â”‚   â”œâ”€â”€ ai_features_core
â”‚   â”œâ”€â”€ ai_feature_providers_core
â”‚   â”œâ”€â”€ ai_plan_matrix
â”‚   â””â”€â”€ ai_group_overrides
â”œâ”€â”€ ETAPA 32: Ligar painel admin Ã  config de IA (sem deploy)
â”‚   â”œâ”€â”€ Ativar todos os menus de IA
â”‚   â”œâ”€â”€ EdiÃ§Ã£o por PLANO â€¢ FEATURE â€¢ PERFIL
â”‚   â””â”€â”€ Criar view /admin/ia-matrix
â”œâ”€â”€ ETAPA 33: Orquestrador de IA usando AI_CONFIG_CORE
â”‚   â”œâ”€â”€ lib/ai-config-core.ts
â”‚   â””â”€â”€ getProvidersForRequest + checkAndConsumeLimits
â”œâ”€â”€ ETAPA 34: Expor AI_CONFIG_CORE para GERADOR DE SAAS
â”‚   â””â”€â”€ docs/AI-CONFIG-CORE.md + lib/saas-generator-core.ts
â””â”€â”€ ETAPA 35: QA completo + resumo para ChatGPT

PATCH BLOCO 31-35 â€“ CONTROLE DE IA POR MENU E POR USUÃRIO:
â”œâ”€â”€ PrincÃ­pio: "ADMIN enxerga em cada menu quais IAs trabalham"
â”œâ”€â”€ Tabelas adicionais:
â”‚   â”œâ”€â”€ ai_feature_menu_map (mapeia menu â†’ feature de IA)
â”‚   â””â”€â”€ ai_usage_stats_daily (estatÃ­sticas de uso)
â”œâ”€â”€ FunÃ§Ãµes SQL adicionais:
â”‚   â”œâ”€â”€ ai_get_menu_config()
â”‚   â””â”€â”€ ai_get_user_ia_profile()
â”œâ”€â”€ Novas telas admin:
â”‚   â”œâ”€â”€ /admin/ia-mapa-menus (mapa de IA por menu)
â”‚   â”œâ”€â”€ /admin/ia-carga (visÃ£o de carga global)
â”‚   â””â”€â”€ /admin/ia-grupos (visÃ£o por grupo promocional)
â”œâ”€â”€ Menu UsuÃ¡rios mostra "perfil IA" de cada usuÃ¡rio
â””â”€â”€ Clonagem do modelo de IA para SaaS filhos e White Label

REGRA FIXA:
â”œâ”€â”€ NENHUMA ETAPA estÃ¡ completa sem atualizar TODOS os TXTs e Manuais
â”œâ”€â”€ Formato de commit: "ETAPA XX â€“ [descriÃ§Ã£o] (cÃ³digo + documentaÃ§Ã£o sincronizados)"
â””â”€â”€ PROIBIDO marcar como concluÃ­da se docs nÃ£o refletirem realidade

COMANDO PARA INICIAR:
"Vou executar o CICLO RADAR 5 TXT completo e depois a ETAPA 21"

================================================================================
SESSÃƒO 04/12/2025 06:37 UTC-5 â€“ PATCH CONTROL PLANE
================================================================================

O QUE FOI VERIFICADO:
â”œâ”€â”€ PATCH CONTROL PLANE GLOBAL â†’ âœ… JÃ IMPLEMENTADO
â”‚   â”œâ”€â”€ docs/CONTROL-PLANE.md (229 linhas)
â”‚   â”œâ”€â”€ lib/control-plane.ts (473 linhas)
â”‚   â”œâ”€â”€ ReferÃªncias no ATLAS
â”‚   â””â”€â”€ ReferÃªncias no TUDO PARA O GPT

CONCEITO CONTROL PLANE:
â”œâ”€â”€ TRÃŠS CAMADAS: CÃ³digo (deploy) + ConfiguraÃ§Ã£o (banco) + Control Plane (painel)
â”œâ”€â”€ MODO A: Admin local por instÃ¢ncia (/admin) â†’ ATUAL âœ…
â”œâ”€â”€ MODO B: Control Hub externo â†’ FUTURO BLOCO 46-50
â””â”€â”€ Simbiose com Gerador de SaaS e White Label

FUTURO-TERMINAR-IMPLEMENTACAO.txt ATUALIZADO:
â”œâ”€â”€ Adicionado PATCH CONTROL PLANE GLOBAL
â”œâ”€â”€ Criada seÃ§Ã£o "IMPLEMENTAR WINDSURF + EDUARDO"
â”œâ”€â”€ 14 FASES organizadas com 72 itens
â””â”€â”€ Cada fase com fonte de auditoria identificada

TOTAL DE FASES: ANTES ERA 13 / AGORA: 14

================================================================================
SESSÃƒO 04/12/2025 06:38 UTC-5 â€“ AUDITORIA DA AUDITORIA V2
================================================================================

O QUE FOI CRIADO:
â”œâ”€â”€ AUDITORIA-DA-AUDITORIA-V2.txt â†’ NOVO ARQUIVO
â”‚   â”œâ”€â”€ Super-auditoria MAIS RIGOROSA que a V1
â”‚   â”œâ”€â”€ 7 BLOCOS de verificaÃ§Ã£o (A atÃ© G)
â”‚   â”œâ”€â”€ 150+ itens de checklist
â”‚   â””â”€â”€ Formato de resposta obrigatÃ³rio

O QUE A AUDITORIA V1 NÃƒO COBRIU:
â”œâ”€â”€ VerificaÃ§Ã£o dos 11 PATCHES aplicados
â”œâ”€â”€ VerificaÃ§Ã£o do BLOCO 31-35 (AI_CONFIG_CORE)
â”œâ”€â”€ VerificaÃ§Ã£o do CONTROL PLANE
â”œâ”€â”€ VerificaÃ§Ã£o de integraÃ§Ã£o entre componentes
â””â”€â”€ VerificaÃ§Ã£o de migrations pendentes

SUPER-CHECKLIST V2 (7 BLOCOS):
â”œâ”€â”€ BLOCO A: VerificaÃ§Ã£o de arquivos crÃ­ticos
â”œâ”€â”€ BLOCO B: VerificaÃ§Ã£o de rotas/pÃ¡ginas
â”œâ”€â”€ BLOCO C: VerificaÃ§Ã£o de APIs
â”œâ”€â”€ BLOCO D: VerificaÃ§Ã£o de tabelas no Supabase
â”œâ”€â”€ BLOCO E: VerificaÃ§Ã£o de funcionalidades
â”œâ”€â”€ BLOCO F: VerificaÃ§Ã£o de patches aplicados
â””â”€â”€ BLOCO G: VerificaÃ§Ã£o do BLOCO 31-35

FUTURO-TERMINAR-IMPLEMENTACAO.txt ATUALIZADO:
â”œâ”€â”€ Adicionada FASE 15 â€“ Auditoria da Auditoria V2
â”œâ”€â”€ 15 FASES organizadas com 82 itens
â””â”€â”€ Cada fase com fonte de auditoria identificada

TOTAL DE FASES: ANTES ERA 14 / AGORA: 15

================================================================================
SESSÃƒO 04/12/2025 06:42 UTC-5 â€“ REGRA GIT COMO FONTE DA VERDADE
================================================================================

REGRA MEMORIZADA:
â”œâ”€â”€ Git Ã© a FONTE DA VERDADE para verificar implementaÃ§Ã£o
â”œâ”€â”€ Eduardo atualiza o Git minuto a minuto
â”œâ”€â”€ NÃƒO confiar apenas em documentaÃ§Ã£o - verificar no cÃ³digo real
â””â”€â”€ RepositÃ³rio: https://github.com/edueduardo/radar-narcisista

QUANDO CONSULTAR GIT:
â”œâ”€â”€ "confere isso no Git"
â”œâ”€â”€ "faz auditoria da auditoria"
â”œâ”€â”€ "vÃª se o Windsurf realmente implementou"
â”œâ”€â”€ "compara prompt X com o cÃ³digo"
â””â”€â”€ Qualquer assunto de cÃ³digo/implementaÃ§Ã£o

FLUXO DE AUDITORIA:
â”œâ”€â”€ 1. Eduardo manda prompt/texto
â”œâ”€â”€ 2. Windsurf verifica no Git se foi implementado
â”œâ”€â”€ 3. Windsurf compara documentaÃ§Ã£o vs. cÃ³digo real
â”œâ”€â”€ 4. Windsurf reporta: âœ… Implementado / âš ï¸ Parcial / âŒ NÃ£o implementado
â””â”€â”€ 5. Windsurf implementa o que falta (se autorizado)

TOTAL DE FASES: ANTES ERA 15 / AGORA: 15 (sem alteraÃ§Ã£o)

================================================================================
SESSÃƒO 04/12/2025 06:44 UTC-5 â€“ PATCH AVATARES/PERSONAS DE IA
================================================================================

CONCEITO PRINCIPAL:
â”œâ”€â”€ PROVIDERS REAIS (sÃ³ admin vÃª): OpenAI, Claude, Together, Grok
â”œâ”€â”€ PERSONAS/AVATARES (usuÃ¡rio vÃª): Mentora Calma, Analista LÃ³gico, etc.
â””â”€â”€ Admin vÃª TUDO: provider real + persona + contexto + logs

TABELAS A CRIAR:
â”œâ”€â”€ ai_providers (se nÃ£o existir)
â”œâ”€â”€ ai_personas (NOVA)
â””â”€â”€ ai_persona_bindings (NOVA)

PERSONAS PADRÃƒO:
â”œâ”€â”€ ğŸ•Šï¸ Mentora Calma (acolhimento)
â”œâ”€â”€ ğŸ§  Analista LÃ³gico (estrutura/fatos)
â”œâ”€â”€ ğŸ›¡ï¸ GuardiÃ£o de SeguranÃ§a (alertas de risco)
â””â”€â”€ ğŸ“š Curador de ConteÃºdo (biblioteca/blog)

ARQUIVOS A CRIAR:
â”œâ”€â”€ lib/ai-personas.ts
â”œâ”€â”€ /admin/ia-personas
â””â”€â”€ /admin/ia-analytics

INTEGRAÃ‡ÃƒO:
â”œâ”€â”€ Gerador de SaaS nasce com esse sistema CORE
â”œâ”€â”€ WhiteLabel usa personas customizÃ¡veis
â””â”€â”€ Logs expandidos com persona_slug + provider_key

TOTAL DE FASES: ANTES ERA 15 / AGORA: 16

================================================================================
SESSÃƒO 04/12/2025 06:52 UTC-5 â€“ PATCH ADMIN MENU CORE
================================================================================

O QUE FOI AUDITADO:
â”œâ”€â”€ PATCH ADMIN MENU CORE â†’ âœ… JÃ IMPLEMENTADO
â”‚   â”œâ”€â”€ lib/admin-core-menu.ts (700 linhas)
â”‚   â”œâ”€â”€ 8 grupos organizados por prioridade
â”‚   â”œâ”€â”€ 55 itens de menu definidos
â”‚   â”œâ”€â”€ 11 funÃ§Ãµes auxiliares
â”‚   â””â”€â”€ 49 pastas admin existentes

ESTRUTURA DOS 8 GRUPOS:
1. VisÃ£o Geral & Controle (admin-core-overview) - 9 itens
2. Pessoas & Acessos (admin-core-people) - 5 itens
3. Planos, Billing & PromoÃ§Ãµes (admin-core-billing) - 5 itens
4. IAs & OrquestraÃ§Ã£o (admin-core-ai) - 10 itens
5. Produto & Funcionalidades (admin-core-product) - 7 itens
6. Front & ConteÃºdos (admin-core-front) - 8 itens
7. GovernanÃ§a & LGPD (admin-core-governance) - 5 itens
8. LaboratÃ³rio & Dev (admin-core-lab) - 6 itens

PENDÃŠNCIAS IDENTIFICADAS:
â”œâ”€â”€ 11 itens sÃ£o placeholders (precisam implementaÃ§Ã£o real)
â”œâ”€â”€ Sidebar do admin precisa consumir adminCoreMenu
â””â”€â”€ DocumentaÃ§Ã£o em docs/MANUAL-ADMIN.md precisa ser atualizada

REGRA CRÃTICA:
ADMIN + DASHBOARD = GERADOR DE SAAS
â”œâ”€â”€ Tudo que for verdade no ADMIN do Radar â†’ vira matÃ©ria-prima do GERADOR DE SAAS
â””â”€â”€ "No administrador, eu tenho isso" = "Isso tambÃ©m existe no GERADOR DE SAAS"

FUTURO-TERMINAR-IMPLEMENTACAO.txt ATUALIZADO:
â”œâ”€â”€ Adicionada FASE 17 â€“ PATCH ADMIN MENU CORE
â”œâ”€â”€ 17 FASES organizadas com 104 itens
â””â”€â”€ Cada fase com fonte de auditoria identificada

TOTAL DE FASES: ANTES ERA 16 / AGORA: 17

================================================================================
SESSÃƒO 04/12/2025 06:57 UTC-5 â€“ PATCH NÃšCLEO DE INTERFACES
================================================================================

O QUE FOI AUDITADO:
â”œâ”€â”€ PATCH NÃšCLEO DE INTERFACES â†’ âœ… JÃ IMPLEMENTADO
â”‚   â”œâ”€â”€ lib/ui-core-registry.ts (712 linhas)
â”‚   â”œâ”€â”€ 25 grupos definidos (5 audiences)
â”‚   â”œâ”€â”€ 95 telas registradas
â”‚   â””â”€â”€ 14 funÃ§Ãµes auxiliares

ESTRUTURA POR AUDIENCE:
| AUDIENCE | GRUPOS | TELAS |
|----------|--------|-------|
| admin | 8 | 55 |
| user | 5 | 16 |
| professional | 4 | 8 |
| whitelabel | 4 | 8 |
| generator | 4 | 8 |
| TOTAL | 25 | 95 |

REGRA AUTO-ENCAIXE:
Toda vez que surgir uma nova tela:
1. Registrar em uiCoreRegistry.screens
2. Definir groupId, audience, priority
3. Automaticamente entra no menu/dashboard correto

PENDÃŠNCIAS IDENTIFICADAS:
â”œâ”€â”€ Sidebar ADMIN consumir uiCoreRegistry
â”œâ”€â”€ Dashboard USUÃRIA consumir getUserDashboardSections()
â”œâ”€â”€ Dashboard PROFISSIONAL consumir getProfessionalDashboardSections()
â”œâ”€â”€ Criar rotas WHITE-LABEL (/whitelabel/*)
â””â”€â”€ Criar rotas GERADOR DE SAAS (/admin/gerador-saas/*)

FUTURO-TERMINAR-IMPLEMENTACAO.txt ATUALIZADO:
â”œâ”€â”€ Adicionada FASE 18 â€“ PATCH NÃšCLEO DE INTERFACES
â”œâ”€â”€ 18 FASES organizadas com 120 itens
â””â”€â”€ Cada fase com fonte de auditoria identificada

TOTAL DE FASES: ANTES ERA 17 / AGORA: 18

================================================================================
SESSÃƒO 04/12/2025 06:58 UTC-5 â€“ MATRIZ DE IAs
================================================================================

O QUE FOI AUDITADO:
â”œâ”€â”€ MATRIZ DE IAs â†’ âœ… PARCIALMENTE IMPLEMENTADO
â”‚   â”œâ”€â”€ lib/ai-config-core.ts (625 linhas)
â”‚   â”œâ”€â”€ database/migrate-ai-config-core.sql (738 linhas)
â”‚   â”œâ”€â”€ /admin/ia-matrix/page.tsx (527 linhas)
â”‚   â”œâ”€â”€ /admin/configurar-ias/page.tsx (716 linhas)
â”‚   â””â”€â”€ 14 pastas admin de IA existentes

TABELAS SQL DEFINIDAS:
1. ai_providers_core - Provedores de IA
2. ai_features_core - Features que usam IA
3. ai_feature_providers_core - Quais IAs por feature
4. ai_plan_matrix - ConfiguraÃ§Ã£o por plano/perfil
5. ai_group_overrides - ExceÃ§Ãµes por grupo/usuÃ¡rio

PENDÃŠNCIAS IDENTIFICADAS:
â”œâ”€â”€ Executar migrate-ai-config-core.sql no Supabase
â”œâ”€â”€ Seed inicial com providers/features
â”œâ”€â”€ Features consumirem AIConfigCore
â””â”€â”€ Integrar com GERADOR DE SAAS

REGRA CRÃTICA: ROTEADOR DE IA
Todas as features que usam IA devem:
1. Chamar AIConfigCore.getProvidersForContext()
2. Verificar limites com checkLimits()
3. Registrar uso com logUsage()
4. NUNCA chamar OpenAI/Claude direto no cÃ³digo

FUTURO-TERMINAR-IMPLEMENTACAO.txt ATUALIZADO:
â”œâ”€â”€ Adicionada FASE 19 â€“ MATRIZ DE IAs
â”œâ”€â”€ 19 FASES organizadas com 132 itens
â””â”€â”€ Cada fase com fonte de auditoria identificada

TOTAL DE FASES: ANTES ERA 18 / AGORA: 19

================================================================================
SESSÃƒO 04/12/2025 06:59 UTC-5 â€“ MATRIZ GLOBAL DE IAs
================================================================================

O QUE FOI AUDITADO:
â”œâ”€â”€ MATRIZ GLOBAL DE IAs â†’ âš ï¸ PARCIALMENTE IMPLEMENTADO
â”‚   â”œâ”€â”€ 9 tabelas existem (mas 2 sÃ£o duplicadas)
â”‚   â”œâ”€â”€ 4 tabelas faltam
â”‚   â”œâ”€â”€ 3 funÃ§Ãµes faltam
â”‚   â””â”€â”€ Features ainda chamam OpenAI direto

TABELAS EXISTENTES:
âœ… ai_providers, ai_providers_core (DUPLICADAS!)
âœ… ai_features_core, ai_feature_providers_core
âœ… ai_plan_matrix, ai_group_overrides
âœ… ai_personas, ai_persona_bindings, ai_persona_logs

TABELAS FALTANDO:
âŒ ai_menus (menus/features do sistema)
âŒ ai_capabilities (capacidades: chat, diario, etc.)
âŒ ai_menu_providers (ligaÃ§Ã£o menu â†’ provider)
âŒ ai_usage_logs (logs de uso de IA)

FUNÃ‡Ã•ES FALTANDO:
âŒ routeAIRequest() - Roteador central de IA
âŒ getAvailableProviders() - Lista providers para contexto
âŒ chooseProvider() - Escolhe provider por peso

REGRA CRÃTICA:
NADA MAIS CHAMA "OpenAI diretamente no cÃ³digo de feature".
Todas as features passam a chamar:
  routeAIRequest({ featureKey, menuKey, userRole, planKey, tenantKey, payload })

FUTURO-TERMINAR-IMPLEMENTACAO.txt ATUALIZADO:
â”œâ”€â”€ Adicionada FASE 20 â€“ MATRIZ GLOBAL DE IAs
â”œâ”€â”€ 20 FASES organizadas com 155 itens
â””â”€â”€ Cada fase com fonte de auditoria identificada

TOTAL DE FASES: ANTES ERA 19 / AGORA: 20

================================================================================
SESSÃƒO 04/12/2025 07:04 UTC-5 â€“ MODO SIMULAÃ‡ÃƒO + PENTE FINO
================================================================================

O QUE FOI AUDITADO:

=== FASE 21 â€“ MODO SIMULAÃ‡ÃƒO MULTIPERFIL ===
âœ… lib/impersonation.ts (424 linhas)
âœ… components/ImpersonationBanner.tsx (163 linhas)
âœ… /api/admin/impersonation/route.ts
âœ… database/migrate-impersonation.sql
âš ï¸ Falta: /admin/simulacao, getEffectiveSession(), cookie, middleware

=== FASE 22 â€“ PENTE FINO / LACUNAS GERAIS ===

BLOCO A â€“ AVATARES/PERSONAS:
âœ… ai_personas, lib/ai-personas.ts, /admin/ia-personas
âš ï¸ Falta: getSafeDisplayForUser(), telas exibir persona

BLOCO B â€“ HELP POR MENU:
âœ… lib/menu-help-registry.ts (638 linhas)
âš ï¸ Falta: tabela admin_menu_help, Ã­cone "?", help para todos menus

BLOCO C â€“ ORGANIZAÃ‡ÃƒO MENU ADMIN:
âœ… lib/admin-core-menu.ts, lib/ui-core-registry.ts
âš ï¸ Falta: docs/ADMIN-MENU-MAP.md, sidebar consumir adminCoreMenu

BLOCO D â€“ IA POR PLANO/PROMO:
âœ… ai_plan_matrix, ai_group_overrides
âš ï¸ Falta: UI com aba "Planos & PromoÃ§Ãµes"

BLOCO E â€“ VISÃƒO GLOBAL IAs:
âš ï¸ Falta: ai_usage_logs, /admin/ia-analytics

BLOCO F â€“ GERADOR + CONTROL TOWER:
âš ï¸ Falta: docs/GERADOR-CORE.md, Control Tower (futuro)

FUTURO-TERMINAR-IMPLEMENTACAO.txt ATUALIZADO:
â”œâ”€â”€ Adicionadas FASES 21 e 22
â”œâ”€â”€ 22 FASES organizadas com 188 itens
â””â”€â”€ Cada fase com fonte de auditoria identificada

TOTAL DE FASES: ANTES ERA 20 / AGORA: 22

================================================================================
SESSÃƒO 04/12/2025 07:05 UTC-5 â€“ AUDITORIA GERAL BLOCO 21-25
================================================================================

Fonte: TUDO-PARA-O-GPT-v2 - Auditoria Geral Radar Narcisista

=== BLOCO 21-25 - STATUS ===
âœ… ETAPA 21 - Billing SÃ³lido & Add-ons: CONCLUÃDA
âœ… ETAPA 22 - OrÃ¡culo V2 Integrado: CONCLUÃDA
âœ… ETAPA 23 - SeguranÃ§a TÃ©cnica: CONCLUÃDA
âœ… ETAPA 24 - Manuais & Links: CONCLUÃDA
âœ… ETAPA 25 - QA PÃ³s-MVP: CONCLUÃDA

=== PATCHES - STATUS ===
âœ… ORÃCULO: CONFORME (100%)
âš ï¸ MATRIZ DE IAs GLOBAL: PARCIAL (60%)
âš ï¸ MODO SIMULAÃ‡ÃƒO: PARCIAL (50%)
âš ï¸ PENTE FINO: PARCIAL (55%)

=== ARQUIVOS CONFIRMADOS ===
BILLING: migrate-user-addons.sql, lib/user-addons.ts, /api/addons
ORÃCULO: migrate-oraculo-logs.sql, ORACULO-V2-PROMPT.md, PATCH-ORACULO.md
SEGURANÃ‡A: rate-limit.ts, logger.ts, pino-logger.ts, /api/health
MANUAIS: MANUAL-ADMIN/USUARIA/PROFISSIONAL/DEV/WHITELABEL.md
QA: CHECKLIST-POS-MVP.md, LAMPADA-RADAR.txt, TESTES-RADAR.txt
IAs: ai-config-core.ts, ai-personas.ts, menu-help-registry.ts, impersonation.ts

=== ITENS FALTANDO ===
TABELAS: ai_menus, ai_capabilities, ai_menu_providers, ai_usage_logs
FUNÃ‡Ã•ES: routeAIRequest(), getAvailableProviders(), chooseProvider()
TELAS: /admin/simulacao, /admin/ia-analytics
DOCS: ADMIN-MENU-MAP.md, GERADOR-CORE.md

FUTURO-TERMINAR-IMPLEMENTACAO.txt ATUALIZADO:
â”œâ”€â”€ Adicionada FASE 23 â€“ AUDITORIA BLOCO 21-25
â”œâ”€â”€ 23 FASES organizadas com 213 itens
â””â”€â”€ PrÃ³ximas aÃ§Ãµes sugeridas listadas

TOTAL DE FASES: ANTES ERA 22 / AGORA: 23

================================================================================
SESSÃƒO 04/12/2025 07:11 UTC-5 â€“ PENTE FINO COMPLETO (PROMPTS + PATCHES)
================================================================================

Fonte: Chat completo dividido em partes + AUDITORIA_PROMPTS_PATCHES_COMPLETO.txt

=== ARQUIVO EXISTENTE IDENTIFICADO ===
AUDITORIA_PROMPTS_PATCHES_COMPLETO.txt (1060 linhas)
ContÃ©m: 4 PROMPTS + 9 PATCHES + 1 Migration SQL

=== STATUS DOS PATCHES ===
âœ… PATCH 1 (JournalEntryType): 100%
âœ… PATCH 2 (BLOCO 21-25): 100%
âœ… PATCH 3 (ORÃCULO): 100%
âœ… PATCH 4 (Regras ComunicaÃ§Ã£o): 100%
âœ… PATCH 5 (Blocos 10-40): 100%
âš ï¸ PATCH 6 (IAs por Menu): 60%
âš ï¸ PATCH 7 (Menu Admin + Help): 55%
âœ… PATCH 8 (Avatares/Personas): 70%
âš ï¸ PATCH 9 (Modo SimulaÃ§Ã£o): 50%

=== MIGRATIONS CONFIRMADAS ===
âœ… migrate-ai-config-core.sql
âœ… migrate-ai-personas.sql
âœ… migrate-impersonation.sql
âœ… migrate-user-addons.sql
âœ… migrate-oraculo-logs.sql

FUTURO-TERMINAR-IMPLEMENTACAO.txt ATUALIZADO:
â”œâ”€â”€ Adicionada FASE 24 â€“ AUDITORIA PROMPTS/PATCHES
â”œâ”€â”€ 24 FASES organizadas com 232 itens
â””â”€â”€ Todos os prompts e patches mapeados com status

TOTAL DE FASES: ANTES ERA 23 / AGORA: 24

================================================================================
SESSÃƒO 04/12/2025 07:13 UTC-5 â€“ PROMPTS CONSOLIDADOS (RADAR-AUDITORIA-PROMPTS-ALL)
================================================================================

Fonte: TXT Ãšnico com Todos os Prompts para o Windsurf

=== 6 PROMPTS CONSOLIDADOS ===
| PROMPT | DESCRIÃ‡ÃƒO | STATUS | % |
|--------|-----------|--------|---|
| 01 | BLOCO 21-25 | âœ… IMPLEMENTADO | 95% |
| 02 | MATRIZ GLOBAL DE IAs | âš ï¸ PARCIAL | 55% |
| 03 | IAs por Plano/Promo | âš ï¸ PARCIAL | 40% |
| 04 | Frontpage DinÃ¢mica | âš ï¸ PARCIAL | 30% |
| 05 | Modo SimulaÃ§Ã£o | âš ï¸ PARCIAL | 50% |
| 06 | Help por Menu | âš ï¸ PARCIAL | 45% |

=== ITENS FALTANDO ===
TABELAS: ai_menus, ai_menu_providers, ai_usage_logs, admin_menu_help
FUNÃ‡Ã•ES: lib/ai-router.ts, getProvidersForMenu(), callAIForMenu()
TELAS: /admin/simulacao, /admin/ia-analytics, /admin/ia-planos
DOCS: ADMIN-MENU-MAP.md, GERADOR-CORE.md

FUTURO-TERMINAR-IMPLEMENTACAO.txt ATUALIZADO:
â”œâ”€â”€ Adicionada FASE 25 â€“ PROMPTS CONSOLIDADOS
â”œâ”€â”€ 25 FASES organizadas com 262 itens
â””â”€â”€ Todos os 6 prompts mapeados com status

TOTAL DE FASES: ANTES ERA 24 / AGORA: 25

================================================================================
SESSÃƒO 04/12/2025 07:20 UTC-5 â€“ ARQUIVOS TXT COMPLETOS GERADOS
================================================================================

ARQUIVOS CRIADOS PARA COLAR NO WINDSURF:

1. AUDITORIA-COMPLETA-WINDSURF.txt (ARQUIVO ÃšNICO CONSOLIDADO)
   - 4 PROMPTS completos
   - 9 PATCHES completos
   - Checklist final
   - InstruÃ§Ãµes para Windsurf verificar e implementar

2. TODOS-PROMPTS-PARTE1.txt (Prompts 1-3)
3. TODOS-PROMPTS-PARTE2.txt (Prompt 4 + Patches 1-3)
4. TODOS-PROMPTS-PARTE3.txt (Patches 4-9 + Checklist)

INSTRUÃ‡ÃƒO:
Cole o arquivo AUDITORIA-COMPLETA-WINDSURF.txt no Windsurf.
Para cada PROMPT e PATCH, ele deve responder:
- IMPLEMENTADO (100%)
- PARCIAL (X%) - o que falta
- NÃƒO IMPLEMENTADO - implementar agora

================================================================================
SESSÃƒO 04/12/2025 07:21 UTC-5 â€“ MEGA AUDITOR PARTE 1 (BLOCOS A-J)
================================================================================

ARQUIVO CRIADO: MEGA-AUDITOR-PARTE1-COMPLETO.txt

CONTEÃšDO:
- BLOCO A: ETAPAS 21-25 (PÃ³s-MVP)
- BLOCO B: PATCH ORÃCULO (V1/V2)
- BLOCO C: ORÃCULO MULTIPERFIL (Futuro)
- BLOCO D: MATRIZ GLOBAL DE IAs
- BLOCO E: IAs POR PLANO/PROMO
- BLOCO F: FRONTPAGE DINÃ‚MICA
- BLOCO G: MODO SIMULAÃ‡ÃƒO
- BLOCO H: HELP POR MENU
- BLOCO I: ORGANIZAÃ‡ÃƒO ADMIN
- BLOCO J: AVATARES/PERSONAS

INSTRUÃ‡ÃƒO:
Cole o arquivo MEGA-AUDITOR-PARTE1-COMPLETO.txt no Windsurf.
Ele vai verificar cada bloco e responder:
- CONCLUÃDO / PARCIAL / NÃƒO IMPLEMENTADO

FUTURO-TERMINAR-IMPLEMENTACAO.txt ATUALIZADO:
â”œâ”€â”€ Adicionada FASE 26 â€“ MEGA AUDITOR PARTE 1
â”œâ”€â”€ 26 FASES organizadas com 272 itens
â””â”€â”€ Todos os 10 blocos mapeados com status

TOTAL DE FASES: ANTES ERA 25 / AGORA: 26

================================================================================
SESSÃƒO 04/12/2025 07:24 UTC-5 â€“ ARQUIVO MEGA COMPLETO GERADO
================================================================================

ARQUIVO CRIADO: RADAR-PROMPTS-PATCHES-MEGA-COMPLETO.txt

CONTEÃšDO COMPLETO:

PARTE 1 - 4 PROMPTS:
- PROMPT 1: Etapa 7.2 â€“ Plano de IntegraÃ§Ã£o
- PROMPT 2: Etapa 7.3 â€“ ImplementaÃ§Ã£o
- PROMPT 3: Mapeamento do Projeto
- PROMPT 4: Mega Prompt de Auditoria

PARTE 2 - 9 PATCHES:
- PATCH 1: JournalEntryType Timeline
- PATCH 2: BLOCO 21-25 PÃ³s-MVP
- PATCH 3: OrÃ¡culo CorreÃ§Ã£o Conceitual
- PATCH 4: Regras de ComunicaÃ§Ã£o
- PATCH 5: OrganizaÃ§Ã£o Blocos 10-40
- PATCH 6: IAs por Menu/Plano/Perfil
- PATCH 7: Menu Admin + Help
- PATCH 8: Avatares/Personas
- PATCH 9: Modo SimulaÃ§Ã£o

PARTE 3 - CHECKLIST FINAL

INSTRUÃ‡ÃƒO:
Cole o arquivo RADAR-PROMPTS-PATCHES-MEGA-COMPLETO.txt no Windsurf.
Para cada PROMPT e PATCH, ele deve responder:
- IMPLEMENTADO / PARCIAL / NÃƒO IMPLEMENTADO

FUTURO-TERMINAR-IMPLEMENTACAO.txt ATUALIZADO:
â”œâ”€â”€ Adicionada FASE 27 â€“ ARQUIVO MEGA COMPLETO
â”œâ”€â”€ 27 FASES organizadas com 285 itens
â””â”€â”€ 4 prompts + 9 patches mapeados

TOTAL DE FASES: ANTES ERA 26 / AGORA: 27

================================================================================
SESSÃƒO 04/12/2025 07:28 UTC-5 â€“ ARQUIVO TXT DO CHAT ORIGINAL IDENTIFICADO
================================================================================

ARQUIVO FONTE DO CHATGPT:
c:\Users\teste\Desktop\2025-11-30 14-19-37-Plano_de_integra__o.txt

TAMANHO: 2.167.440 bytes (64.822 linhas)
CONTEÃšDO: Chat completo do ChatGPT de 30/11/2025

PROMPTS E PATCHES EXTRAÃDOS:
âœ… PROMPT 1: Etapa 7.2 â€“ Plano de IntegraÃ§Ã£o (linhas 5-225)
âœ… PROMPT 2: Etapa 7.3 â€“ ImplementaÃ§Ã£o (linhas 433-609)
âœ… PROMPT 3: Mapeamento do Projeto (linhas 794-1000+)
âœ… PATCH 1: CorreÃ§Ã£o JournalEntryType (linhas 635-650)

(Arquivo contÃ©m mais prompts e patches nas linhas seguintes)

ARQUIVOS JÃ GERADOS COM CONTEÃšDO COMPLETO:
1. RADAR-PROMPTS-PATCHES-MEGA-COMPLETO.txt (4 prompts + 9 patches)
2. MEGA-AUDITOR-PARTE1-COMPLETO.txt (10 blocos A-J)
3. AUDITORIA-COMPLETA-WINDSURF.txt (versÃ£o resumida)

INSTRUÃ‡ÃƒO:
Os arquivos acima jÃ¡ contÃªm TODO o conteÃºdo extraÃ­do do chat original.
Cole qualquer um deles no Windsurf para auditoria.

================================================================================
SESSÃƒO 04/12/2025 07:30 UTC-5 â€“ FASE 28 ADICIONADA (AVATAR/TTS + PERPLEXITY)
================================================================================

NOVO CONTEÃšDO EXTRAÃDO DO CHAT:

1. MÃ“DULO AVATAR/TTS (Revoicer/Speechelo/ElevenLabs):
   - Frontpage/Marketing: vÃ­deos explicativos
   - ConteÃºdo Educacional: Ã¡udio/vÃ­deo
   - White-label: mÃ³dulo opcional premium
   - NUNCA jogar dados sensÃ­veis para serviÃ§o externo

2. PERPLEXITY STYLE (ORÃCULO V2/V3 CORE):
   - Criar "Perplexity interno" em vez de usar externo
   - ORÃCULO V2 CORE com "modo Perplexity"
   - Citar fontes internas: manuais, docs, LÃ‚MPADA, ROADMAP

3. ORQUESTRADOR DE IAs (QUEM MANDA NAS IAs):
   - QUEM MANDA Ã‰ O ADMIN (Eduardo)
   - NÃºcleo sÃ³ executa as regras definidas
   - Perplexity sÃ³ entra onde vocÃª mandar
   - Nada de IA nova se plugar sozinha

4. ARQUITETURA EM 3 CAMADAS:
   - CAMADA 1: Mapa de IAs (quem existe e o que sabe fazer)
   - CAMADA 2: Regras por FunÃ§Ã£o do Sistema
   - CAMADA 3: Orquestrador (triangulaÃ§Ã£o do nÃºcleo)

5. ESTRATÃ‰GIAS DE EXECUÃ‡ÃƒO:
   - Single-model: sÃ³ 1 modelo responde
   - Colaborativo paralelo: 3 IAs + Ã¡rbitro
   - Pipeline sequencial: rascunho â†’ crÃ­tica â†’ refino

FUTURO-TERMINAR-IMPLEMENTACAO.txt ATUALIZADO:
â”œâ”€â”€ Adicionada FASE 28 â€“ AVATAR/TTS + PERPLEXITY + ORQUESTRADOR
â”œâ”€â”€ 28 FASES organizadas com 300 itens
â””â”€â”€ Arquitetura de 3 camadas documentada

TOTAL DE FASES: ANTES ERA 27 / AGORA: 28

================================================================================
SESSÃƒO 04/12/2025 07:38 UTC-5 â€“ FASE 29 ADICIONADA (LABORATÃ“RIO DE IAs)
================================================================================

NOVO CONTEÃšDO EXTRAÃDO DO CHAT:

1. LABORATÃ“RIO DE IAs (MODO SIMULAÃ‡ÃƒO):
   - IA nova NÃƒO entra direto em produÃ§Ã£o
   - Aparece no "LaboratÃ³rio de IAs / SimulaÃ§Ãµes"
   - Cria cenÃ¡rios de simulaÃ§Ã£o (situaÃ§Ãµes reais)
   - Roda simulaÃ§Ãµes com combinaÃ§Ãµes de IAs
   - VÃª relatÃ³rios: custo, tempo, qualidade, risco
   - Decide se aplica ou nÃ£o em produÃ§Ã£o

2. CENÃRIOS DE SIMULAÃ‡ÃƒO:
   - Nome, funÃ§Ã£o alvo, condiÃ§Ãµes
   - Constraints (custo, latÃªncia, risco)
   - Pacote de prompts de teste

3. SALVAR E APLICAR SIMULAÃ‡ÃƒO:
   - Salvar como "preset"
   - Aplicar em funÃ§Ã£o/plano/perfil especÃ­fico
   - NÃƒO precisa deploy (estÃ¡ em banco/config)

4. REGRA FUNDAMENTAL:
   ğŸ‘‰ A IA opina, VOCÃŠ decide
   ğŸ‘‰ Nada entra em produÃ§Ã£o sem confirmaÃ§Ã£o

5. TABELAS SUGERIDAS:
   - ai_simulation_scenarios
   - ai_simulation_runs
   - ai_presets
   - ai_preset_history

6. TELAS ADMIN SUGERIDAS:
   - /admin/ia-lab
   - /admin/ia-lab/[scenario_id]
   - /admin/ia-presets
   - /admin/ia-presets/[preset_id]

FUTURO-TERMINAR-IMPLEMENTACAO.txt ATUALIZADO:
â”œâ”€â”€ Adicionada FASE 29 â€“ LABORATÃ“RIO DE IAs (SIMULAÃ‡ÃƒO)
â”œâ”€â”€ 29 FASES organizadas com 320 itens
â””â”€â”€ 7 blocos documentados (A-G)

TOTAL DE FASES: ANTES ERA 28 / AGORA: 29

================================================================================
SESSÃƒO 04/12/2025 07:40 UTC-5 â€“ FASE 30 ADICIONADA (ARQUITETURA VISUAL)
================================================================================

NOVO CONTEÃšDO EXTRAÃDO DO CHAT:

1. ORGANOGRAMAS MERMAID:
   - ARQUITETURA-ECOSSISTEMA.mmd (Radar + Filhos + Gerador)
   - ARQUITETURA-SAAS.mmd (Arquitetura interna de um SaaS)
   - ARQUITETURA-IA-LAB.mmd (Mapa de IAs + SimulaÃ§Ãµes)

2. MOCKUPS DE TELAS:
   - Dashboard Global do Ecossistema (/admin/ecossistema)
   - Lab de IAs / GovernanÃ§a (/admin/ia-lab)
   - Mapa de IAs por Menu/FunÃ§Ã£o (/admin/ia-mapa)

3. REGRA DE OURO:
   Toda vez que criar ou alterar uma ETAPA importante:
   â†’ Atualizar os arquivos de arquitetura

4. ARQUIVOS A CRIAR:
   - docs/ARQUITETURA-ECOSSISTEMA.mmd
   - docs/ARQUITETURA-SAAS.mmd
   - docs/ARQUITETURA-IA-LAB.mmd
   - docs/ARQUITETURA-RADAR.txt

5. ETAPAS SUGERIDAS:
   - ETAPA A: Dashboard Global do Ecossistema
   - ETAPA B: Lab de IAs (Cadastro + CenÃ¡rios + Presets)
   - ETAPA C: Mapa de IAs por menu/funÃ§Ã£o

FUTURO-TERMINAR-IMPLEMENTACAO.txt ATUALIZADO:
â”œâ”€â”€ Adicionada FASE 30 â€“ ARQUITETURA VISUAL + ORGANOGRAMAS + MOCKUPS
â”œâ”€â”€ 30 FASES organizadas com 345 itens
â””â”€â”€ 8 blocos documentados (A-H)

TOTAL DE FASES: ANTES ERA 29 / AGORA: 30

================================================================================
SESSÃƒO 04/12/2025 07:43 UTC-5 â€“ FASE 31 ADICIONADA (DIAGRAMAS MERMAID)
================================================================================

NOVO CONTEÃšDO EXTRAÃDO DO CHAT:

1. DIAGRAMAS MERMAID COMPLETOS:
   - Arquitetura Geral do Ecossistema
   - GovernanÃ§a de IAs (Lab + SimulaÃ§Ãµes)
   - Fluxo de Escolha de IA numa RequisiÃ§Ã£o
   - Mapa de Menus do Admin (Completo)

2. OUTROS ORGANOGRAMAS SUGERIDOS:
   - Mapa de Menus do Admin + Help embutido
   - Fluxos da UsuÃ¡ria (lado B2C)
   - Fluxo do Profissional / White Label (lado B2B)
   - Painel Global de IA & Carga
   - Pipeline do Gerador de SaaS
   - GovernanÃ§a & Auditoria

3. IMAGENS GERADAS PELO CHATGPT:
   - radar_arquitetura_geral.png
   - radar_arquitetura_radar_mae.png
   - radar_arquitetura_gerador_saas.png
   - radar_arquitetura_ia_orquestracao.png

4. MAPA DE MENUS DO ADMIN (8 GRUPOS):
   - Dashboard Geral
   - Planos & PromoÃ§Ãµes
   - GestÃ£o de IAs
   - OrÃ¡culos
   - UsuÃ¡rios & Tenants
   - Gerador de SaaS
   - Billing & Add-ons
   - Observabilidade & GovernanÃ§a
   - Frontpage & Marketing

FUTURO-TERMINAR-IMPLEMENTACAO.txt ATUALIZADO:
â”œâ”€â”€ Adicionada FASE 31 â€“ DIAGRAMAS MERMAID + MAPA DE MENUS ADMIN
â”œâ”€â”€ 31 FASES organizadas com 375 itens
â””â”€â”€ 6 blocos documentados (A-F)

TOTAL DE FASES: ANTES ERA 30 / AGORA: 31

================================================================================
SESSÃƒO 04/12/2025 07:45 UTC-5 â€“ FASE 32 ADICIONADA (MAPA AUTOMATIZADO)
================================================================================

NOVO CONTEÃšDO EXTRAÃDO DO CHAT:

1. MAPA VIVO DO SISTEMA:
   - Gerado automaticamente a partir do que jÃ¡ existe
   - Menus, IAs, fluxos, planos, SaaS filhos
   - Em formato visual (organograma / Mermaid / diagrama)

2. SUGESTÃ•ES AUTOMÃTICAS EM CIMA DO MAPA:
   - "Aqui estÃ¡ subaproveitando IA X"
   - "Esse menu nÃ£o estÃ¡ ligado a nenhum plano"
   - "Esse SaaS filho estÃ¡ sem OrÃ¡culo"

3. FERRAMENTAS DE TERCEIROS RECOMENDADAS:
   - CodeSee Maps (https://www.codesee.io/)
   - AppMap (https://appmap.io/)
   - Hotjar / Fullstory / PostHog
   - Storybook

4. DEVTOOL INTERNO (GPS DA APLICAÃ‡ÃƒO):
   - Overlay em cima da app mostrando fluxo, rota, IA usada
   - Painel /admin/visual-mapa com organograma

5. TABELAS SUGERIDAS:
   - system_nodes (nÃ³s do sistema)
   - system_edges (ligaÃ§Ãµes entre nÃ³s)
   - system_suggestions (sugestÃµes da IA)

6. ROTAS API SUGERIDAS:
   - GET /api/system-map/nodes
   - GET /api/system-map/edges
   - GET /api/system-map/mermaid
   - POST /api/system-map/suggestions
   - POST /api/system-map/sync

FUTURO-TERMINAR-IMPLEMENTACAO.txt ATUALIZADO:
â”œâ”€â”€ Adicionada FASE 32 â€“ MAPA DO SISTEMA AUTOMATIZADO
â”œâ”€â”€ 32 FASES organizadas com 410 itens
â””â”€â”€ 8 blocos documentados (A-H)

TOTAL DE FASES: ANTES ERA 31 / AGORA: 32

================================================================================
SESSÃƒO 04/12/2025 07:45 UTC-5 â€“ FASE 33 ADICIONADA (ESCALABILIDADE BLOCOS)
================================================================================

NOVO CONTEÃšDO EXTRAÃDO DO CHAT:

1. CONCEITO: BLOCO NÃƒO Ã‰ PASTA, Ã‰ TAG:
   - Cada bloco Ã© um registro com id, faixa, tipo, status
   - Features guardam referÃªncia aos blocos: blocos: [21, 22, 26]
   - Se amanhÃ£ existir bloco 847, sÃ³ adiciona na lista

2. RADAR VISUAL COM 1000 BLOCOS:
   - Filtrar por bloco atual, Ãºltimos 3, intervalo especÃ­fico
   - Filtrar por tipo: fluxos IA, menus, ORÃCULO_V2, Perplexity
   - "Fatias do elefante", nÃ£o o elefante inteiro

3. ORGANIZAÃ‡ÃƒO DE ARQUIVOS TXT POR FAIXAS:
   - docs/BLOCOS/BL010-019.txt
   - docs/BLOCOS/BL020-029.txt
   - (atÃ© o infinito)

4. RADAR VISUAL INTERNO (/admin/radar-visual):
   - Painel lateral com filtros
   - Canvas central (graph)
   - Highlight do nÃ³ atual
   - IntegraÃ§Ã£o com TriÃ¢ngulo de IAs
   - Modo simulaÃ§Ã£o para novas IAs

5. FASE 1 (ALÃVIO RÃPIDO):
   - Criar MAPA-DO-SISTEMA.json
   - Criar diagrama Mermaid automÃ¡tico
   - Regra de ouro: "Criou rota nova? Atualiza o JSON."

6. FASE 2 (RADAR VISUAL INTERNO):
   - PÃ¡gina /admin/radar-visual
   - Acoplar ao Gerador de SaaS

FUTURO-TERMINAR-IMPLEMENTACAO.txt ATUALIZADO:
â”œâ”€â”€ Adicionada FASE 33 â€“ ESCALABILIDADE BLOCOS (10-1000) + RADAR VISUAL
â”œâ”€â”€ 33 FASES organizadas com 450 itens
â””â”€â”€ 8 blocos documentados (A-H)

TOTAL DE FASES: ANTES ERA 32 / AGORA: 33

================================================================================
SESSÃƒO 04/12/2025 07:51 UTC-5 â€“ FASE 34 ADICIONADA (GERADOR SAAS CADEIA)
================================================================================

NOVO CONTEÃšDO EXTRAÃDO DO CHAT:

1. MODELO DE 3 CAMADAS:
   - CORE (MÃƒE) â€“ nÃºcleo compartilhado, Ãºnico
   - TEMPLATES / TEMAS (FILHO TEMÃTICO OU EM BRANCO)
   - INSTÃ‚NCIAS DE SAAS (FILHOS / NETOS)

2. REGRAS OFICIAIS (5):
   - REGRA 1: CORE ÃšNICO
   - REGRA 2: TEMPLATE â‰  CORE
   - REGRA 3: INSTÃ‚NCIA = PONTEIRO
   - REGRA 4: ATUALIZAÃ‡ÃƒO EM CADEIA
   - REGRA 5: GERADOR RESPEITA ISSO EM TUDO

3. CADEIA DE ATUALIZAÃ‡ÃƒO:
   - MÃƒE (core) â†’ INSTÃ‚NCIAS
   - TEMPLATE â†’ INSTÃ‚NCIAS
   - NUNCA: filho â†’ outro filho

4. TABELAS SUGERIDAS:
   - saas_cores (versÃµes do nÃºcleo)
   - saas_templates (templates/temas)
   - saas_instances (instÃ¢ncias geradas)
   - saas_migrations (histÃ³rico de migraÃ§Ãµes)

5. UI DO GERADOR:
   - Escolha do CORE
   - Escolha do TEMPLATE
   - CustomizaÃ§Ãµes
   - Resultado: instÃ¢ncia com referÃªncias

FUTURO-TERMINAR-IMPLEMENTACAO.txt ATUALIZADO:
â”œâ”€â”€ Adicionada FASE 34 â€“ GERADOR SAAS: ARQUITETURA ATUALIZAÃ‡ÃƒO EM CADEIA
â”œâ”€â”€ 34 FASES organizadas com 495 itens
â””â”€â”€ 10 blocos documentados (A-J)

TOTAL DE FASES: ANTES ERA 33 / AGORA: 34

================================================================================
SESSÃƒO 04/12/2025 08:07 UTC-5 â€“ FASE 35 ADICIONADA (ATUALIZAÃ‡ÃƒO VIA ZIP)
================================================================================

NOVO CONTEÃšDO EXTRAÃDO DO CHAT:

PERGUNTA DO EDU:
"Entra atualizaÃ§Ã£o via enviar arquivo ZIP?"

CONTEXTO:
- ApÃ³s definir modelo de 3 camadas (CORE + TEMPLATES + INSTÃ‚NCIAS)
- DÃºvida: como distribuir atualizaÃ§Ãµes para SaaS filhos?

OPÃ‡Ã•ES DOCUMENTADAS:
1. ATUALIZAÃ‡ÃƒO AUTOMÃTICA (recomendada)
2. ATUALIZAÃ‡ÃƒO VIA ZIP/PACOTE
3. HÃBRIDO (crÃ­ticas automÃ¡ticas, opcionais via ZIP)

ESTRUTURA DO ZIP (se implementado):
- manifest.json (versÃµes, changes, migrations)
- /migrations/ (SQL files)
- /patches/ (cÃ³digo alterado)
- /templates/ (atualizaÃ§Ãµes de templates)
- /docs/ (CHANGELOG, UPGRADE_GUIDE)

TABELAS SUGERIDAS:
- saas_update_packages
- saas_update_logs

FUTURO-TERMINAR-IMPLEMENTACAO.txt ATUALIZADO:
â”œâ”€â”€ Adicionada FASE 35 â€“ GERADOR SAAS: ATUALIZAÃ‡ÃƒO VIA ZIP/PACOTE
â”œâ”€â”€ 35 FASES organizadas com 515 itens
â””â”€â”€ 6 blocos documentados (A-F)

TOTAL DE FASES: ANTES ERA 34 / AGORA: 35

================================================================================
SESSÃƒO 04/12/2025 11:05 UTC-5 â€“ MODO IMPLEMENTAR INICIADO
================================================================================

MARCO: INÃCIO DO MODO IMPLEMENTAR

AÃ‡Ã•ES REALIZADAS:
1. Criada Ã¡rea de IMPLEMENTAÃ‡ÃƒO em FUTURO-TERMINAR-IMPLEMENTACAO.txt
2. Criado diretÃ³rio database/sql_consolidado/
3. Criado SQL_CONSOLIDADO_01_BASE.sql com:
   - 14 tipos enumerados (ENUMs)
   - 18 tabelas principais
   - PolÃ­ticas RLS completas
   - 25+ Ã­ndices de performance
   - Triggers para updated_at e handle_new_user
   - INSERT de 4 planos padrÃ£o em plan_catalog

TAREFAS CRIADAS:
â”œâ”€â”€ TAREFA 1: SQL_CONSOLIDADO_01_BASE.sql â†’ CONCLUIDO
â”œâ”€â”€ TAREFA 2: Verificar plan_catalog â†’ CONCLUIDO
â”œâ”€â”€ TAREFA 3: Executar migrations pendentes â†’ PENDENTE
â”œâ”€â”€ TAREFA 4: Unificar ai_providers duplicadas â†’ PENDENTE
â”œâ”€â”€ TAREFA 5: Criar tabelas ai_menus, ai_menu_providers â†’ PENDENTE
â”œâ”€â”€ TAREFA 6: Criar lib/ai-router.ts â†’ PENDENTE
â”œâ”€â”€ TAREFA 7: Criar funÃ§Ãµes de simulaÃ§Ã£o â†’ PENDENTE
â”œâ”€â”€ TAREFA 8: Criar telas admin faltantes â†’ PENDENTE
â”œâ”€â”€ TAREFA 9: Integrar Sidebar com adminCoreMenu â†’ PENDENTE
â””â”€â”€ TAREFA 10: Integrar frontpage com plan_catalog â†’ PENDENTE

ARQUIVOS CRIADOS/MODIFICADOS:
- database/sql_consolidado/SQL_CONSOLIDADO_01_BASE.sql (NOVO)
- FUTURO-TERMINAR-IMPLEMENTACAO.txt (Ã¡rea IMPLEMENTAÃ‡ÃƒO adicionada)
- HISTORICO-UNIFICADO.txt (este registro)

================================================================================
SESSÃƒO 04/12/2025 12:40 UTC-5 â€“ TAREFAS 6 E 7 CONCLUÃDAS
================================================================================

TAREFAS IMPLEMENTADAS:

[TAREFA 6] lib/ai-router.ts - ROTEADOR CENTRAL DE IAs
- Arquivo NOVO: lib/ai-router.ts (420 linhas)
- FunÃ§Ãµes implementadas:
  â”œâ”€â”€ routeAIRequest() - FunÃ§Ã£o principal que TODAS as features devem usar
  â”œâ”€â”€ getProvidersForMenu() - ObtÃ©m providers para um menu
  â”œâ”€â”€ callAIForMenu() - Wrapper conveniente
  â”œâ”€â”€ callCollaborativeAI() - MÃºltiplas IAs respondem
  â””â”€â”€ callWithFallback() - Fallback automÃ¡tico entre providers
- Inclui: cache, rate limiting, logging, modo colaborativo

[TAREFA 7] lib/impersonation.ts - FUNÃ‡Ã•ES DE SIMULAÃ‡ÃƒO
- Arquivo ATUALIZADO: lib/impersonation.ts (+200 linhas)
- FunÃ§Ãµes implementadas:
  â”œâ”€â”€ getEffectiveSession() - Retorna sessÃ£o real ou simulada
  â”œâ”€â”€ ensureNotImpersonatingForDangerousAction() - Verifica aÃ§Ãµes perigosas
  â”œâ”€â”€ assertNotImpersonatingForDangerousAction() - LanÃ§a erro se nÃ£o permitido
  â””â”€â”€ DANGEROUS_ACTIONS - Lista de 13 aÃ§Ãµes bloqueadas durante simulaÃ§Ã£o

TAREFAS CONCLUÃDAS ATÃ‰ AGORA:
â”œâ”€â”€ TAREFA 1: SQL_CONSOLIDADO_01_BASE.sql â†’ âœ…
â”œâ”€â”€ TAREFA 2: plan_catalog com 4 planos â†’ âœ…
â”œâ”€â”€ TAREFA 6: lib/ai-router.ts â†’ âœ…
â”œâ”€â”€ TAREFA 7: FunÃ§Ãµes de simulaÃ§Ã£o â†’ âœ…
â””â”€â”€ TAREFAS 3,4,5,8,9,10 â†’ â³ PENDENTE

TypeScript: âœ… Passou sem erros

================================================================================
SESSÃƒO 04/12/2025 13:15 UTC-5 â€“ TAREFA 8 CONCLUÃDA
================================================================================

[TAREFA 8] TELAS ADMIN FALTANTES - 3 PÃGINAS CRIADAS

1. /admin/simulacao (app/admin/simulacao/page.tsx - 520 linhas)
   - Painel de ImpersonaÃ§Ã£o/Ver Como
   - Busca e seleÃ§Ã£o de usuÃ¡rio
   - InÃ­cio/encerramento de sessÃ£o
   - HistÃ³rico de sessÃµes com detalhes
   - Cards de estatÃ­sticas
   - Integra com lib/impersonation.ts

2. /admin/ia-analytics (app/admin/ia-analytics/page.tsx - 480 linhas)
   - Dashboard de mÃ©tricas de IA
   - Cards: requisiÃ§Ãµes, tokens, custo, tempo, sucesso
   - GrÃ¡fico de uso diÃ¡rio
   - Tabela por provider
   - Tabela por feature
   - Filtro por perÃ­odo (24h, 7d, 30d, 90d)
   - Dados mock para demonstraÃ§Ã£o

3. /admin/ia-planos (app/admin/ia-planos/page.tsx - 510 linhas)
   - ConfiguraÃ§Ã£o de IAs por plano
   - SeleÃ§Ã£o de plano (Free, Basic, Premium, Professional)
   - Adicionar/remover providers
   - Configurar limites diÃ¡rio/mensal
   - Ativar/desativar features por provider
   - Resumo do plano

TAREFAS CONCLUÃDAS ATÃ‰ AGORA:
â”œâ”€â”€ TAREFA 1: SQL_CONSOLIDADO_01_BASE.sql â†’ âœ…
â”œâ”€â”€ TAREFA 2: plan_catalog com 4 planos â†’ âœ…
â”œâ”€â”€ TAREFA 6: lib/ai-router.ts â†’ âœ…
â”œâ”€â”€ TAREFA 7: FunÃ§Ãµes de simulaÃ§Ã£o â†’ âœ…
â”œâ”€â”€ TAREFA 8: Telas admin faltantes â†’ âœ…
â”œâ”€â”€ TAREFA 9: AdminSidebar + help â†’ âœ…
â”œâ”€â”€ TAREFA 10: API plan-catalog â†’ âœ…
â””â”€â”€ TAREFAS 3,4,5 â†’ â³ PENDENTE

TypeScript: âœ… Passou sem erros

================================================================================
SESSÃƒO 04/12/2025 14:10 UTC-5 â€“ TAREFAS 9 E 10 CONCLUÃDAS
================================================================================

[TAREFA 9] ADMIN SIDEBAR INTEGRADA

Arquivo NOVO: components/admin/AdminSidebar.tsx (350 linhas)
- Consome adminCoreMenu para estrutura do menu
- Agrupa itens por categoria com expansÃ£o/colapso
- Ãcone "?" em cada item que abre modal de help
- Modal de help com: o_que_e, para_que_serve, quando_usar, como_funciona
- Suporta colapso/expansÃ£o da sidebar
- Destaca item ativo baseado na rota atual

Arquivo ATUALIZADO: lib/menu-help-registry.ts
- Adicionada funÃ§Ã£o getHelpForRoute() para buscar help por rota

[TAREFA 10] API PLAN-CATALOG

Arquivo NOVO: app/api/plan-catalog/route.ts (180 linhas)
- GET /api/plan-catalog - Busca planos do banco
- Formata features e limits para frontend
- Adiciona campos derivados (isFree, isPopular, icon, color)

Arquivo NOVO: hooks/usePlanCatalog.ts (200 linhas)
- Hook usePlanCatalog() com fallback para dados hardcoded
- Hook useConsumerCatalogPlans() para planos B2C
- Hook usePlanByKey() para buscar plano especÃ­fico

TAREFAS CONCLUÃDAS: 7 de 10 (70%)
â”œâ”€â”€ TAREFA 1: SQL_CONSOLIDADO_01_BASE.sql â†’ âœ…
â”œâ”€â”€ TAREFA 2: plan_catalog com 4 planos â†’ âœ…
â”œâ”€â”€ TAREFA 6: lib/ai-router.ts â†’ âœ…
â”œâ”€â”€ TAREFA 7: FunÃ§Ãµes de simulaÃ§Ã£o â†’ âœ…
â”œâ”€â”€ TAREFA 8: Telas admin faltantes â†’ âœ…
â”œâ”€â”€ TAREFA 9: AdminSidebar + help â†’ âœ…
â”œâ”€â”€ TAREFA 10: API plan-catalog â†’ âœ…
â””â”€â”€ TAREFAS 3,4,5 â†’ ğŸ“„ SQL PRONTO (aguardando execuÃ§Ã£o manual no Supabase)

================================================================================
SESSÃƒO 04/12/2025 14:45 UTC-5 â€“ SQL CONSOLIDADO 02 CRIADO
================================================================================

Arquivo NOVO: database/sql_consolidado/SQL_CONSOLIDADO_02_ADDONS_AI_MENUS.sql (550 linhas)

Consolida TAREFAS 3, 4 e 5 em um Ãºnico SQL para execuÃ§Ã£o no Supabase:

PARTE 1 - USER ADDONS:
- Tabela user_addons (add-ons comprados)
- FunÃ§Ãµes: has_active_addon(), get_addon_credits(), consume_addon_credit()

PARTE 2 - FEATURES E PROFILES:
- Tabela features (features atÃ´micas)
- Tabela feature_profiles (perfis versionados)
- Tabela feature_profile_features (JOIN)
- Tabela user_feature_overrides
- Tabela user_subscriptions_core

PARTE 3 - AI CONFIG CORE:
- Tabela ai_providers_core (unificada)
- Tabela ai_features_core
- Tabela ai_feature_providers_core
- Tabela ai_plan_matrix
- Tabela ai_group_overrides

PARTE 4 - TABELAS NOVAS:
- Tabela ai_menus (menus que usam IA)
- Tabela ai_menu_providers (ligaÃ§Ã£o menu â†’ provider)
- Tabela ai_usage_logs (logs de uso)
- Tabela admin_menu_help (textos de ajuda)

PARTE 5 - SEED DATA:
- 5 provedores de IA
- 9 features de IA
- 7 menus
- 8 features do sistema
- 4 feature profiles padrÃ£o

PRÃ“XIMO PASSO: Executar SQL_CONSOLIDADO_02_ADDONS_AI_MENUS.sql no Supabase SQL Editor

================================================================================
SESSÃƒO 04/12/2025 16:15 UTC-5 â€“ DOCUMENTAÃ‡ÃƒO CRIADA
================================================================================

Arquivos NOVOS:
- docs/ADMIN-MENU-MAP.md (180 linhas) - Mapa completo do menu admin
- docs/GERADOR-CORE.md (250 linhas) - NÃºcleo do gerador de SaaS

ADMIN-MENU-MAP.md contÃ©m:
- Todos os 8 grupos do menu admin
- 55 itens detalhados com rotas e status
- Resumo de implementaÃ§Ã£o por grupo
- PrÃ³ximas implementaÃ§Ãµes pendentes

GERADOR-CORE.md contÃ©m:
- Arquitetura do gerador
- MÃ³dulos core reaproveitÃ¡veis
- Fluxo de geraÃ§Ã£o
- Tabelas do gerador
- Temas disponÃ­veis

================================================================================
SESSÃƒO 04/12/2025 17:00 UTC-5 â€“ TELAS FANPAGE VIVA
================================================================================

Arquivos NOVOS:
- app/admin/fanpage/config/page.tsx (450 linhas) - Config blocos da frontpage
- app/admin/academy/page.tsx (550 linhas) - GestÃ£o de trilhas de aprendizado

/admin/fanpage/config:
- 6 blocos configurÃ¡veis (Radar em NÃºmeros, FAQ, Radar no Mundo, Academy, Depoimentos, Clima)
- Toggle ativar/desativar por bloco
- ReordenaÃ§Ã£o por drag
- Config de max items e refresh interval
- Modal de configuraÃ§Ã£o avanÃ§ada (JSON)

/admin/academy:
- CRUD de trilhas de aprendizado
- 4 tipos de aula: video, article, quiz, exercise
- 3 nÃ­veis: iniciante, intermediÃ¡rio, avanÃ§ado
- Controle de publicaÃ§Ã£o e premium
- EstatÃ­sticas de inscritos e conclusÃ£o

Telas que JÃ EXISTIAM:
- /admin/conteudos/sugestoes (597 linhas)
- /admin/conteudos/publicados
- /admin/conteudos/colecoes
- /admin/conteudos/insights

================================================================================
SESSÃƒO 04/12/2025 17:50 UTC-5 â€“ HELP INTEGRADO NA SIDEBAR
================================================================================

Arquivo MODIFICADO: components/AdminSidebarV2.tsx (+115 linhas)

Funcionalidades adicionadas:
- Ãcone "?" aparece ao passar o mouse em cada item do menu
- Ao clicar no "?", abre modal com ajuda contextual
- Modal exibe: O que Ã©, Para que serve, Quando usar, Passo a passo, Exemplos, Avisos
- Links para menus relacionados no modal
- IntegraÃ§Ã£o com menu-help-registry.ts via getHelpForRoute()

A sidebar agora consome:
- ui-core-registry.ts para estrutura do menu
- menu-help-registry.ts para textos de ajuda

================================================================================
SESSÃƒO 04/12/2025 18:30 UTC-5 â€“ SQL FANPAGE VIVA
================================================================================

Arquivo CRIADO: database/sql_consolidado/SQL_CONSOLIDADO_03_FANPAGE_VIVA.sql (550 linhas)

TABELAS CRIADAS:
1. content_items - ConteÃºdos publicados (artigos, FAQs, notÃ­cias)
2. content_suggestions - SugestÃµes da IA para curadoria
3. content_insights - MÃ©tricas agregadas para frontpage
4. academy_tracks - Trilhas de aprendizado
5. academy_lessons - Aulas das trilhas
6. academy_progress - Progresso do usuÃ¡rio
7. fanpage_config - ConfiguraÃ§Ã£o dos blocos da frontpage

FUNÃ‡Ã•ES CRIADAS:
- update_track_metrics() - Atualiza mÃ©tricas da trilha automaticamente
- get_frontpage_insights() - Busca insights pÃºblicos
- get_published_content() - Busca conteÃºdos publicados

SEED DATA:
- 6 blocos de fanpage configurados
- 6 insights iniciais
- 3 trilhas de exemplo

STATUS: AGUARDANDO EXECUÃ‡ÃƒO MANUAL NO SUPABASE

================================================================================
SESSÃƒO 04/12/2025 19:15 UTC-5 â€“ APIs FANPAGE VIVA
================================================================================

APIs CRIADAS:

1. /api/content (route.ts)
   - GET: Lista conteÃºdos publicados (filtros: type, tag, status)
   - POST: Cria novo conteÃºdo (admin)

2. /api/content/[id] (route.ts)
   - GET: Busca por ID ou slug
   - PUT: Atualiza conteÃºdo (admin)
   - DELETE: Remove conteÃºdo (admin)

3. /api/content/suggestions (route.ts)
   - GET: Lista sugestÃµes pendentes (admin)
   - POST: Cria sugestÃ£o
   - PATCH: Aprova/Rejeita sugestÃ£o (converte para content_items)

4. /api/academy/tracks (route.ts)
   - GET: Lista trilhas (com progresso do usuÃ¡rio)
   - POST: Cria trilha (admin)

5. /api/academy/tracks/[slug] (route.ts)
   - GET: Busca trilha com aulas
   - PUT: Atualiza trilha (admin)
   - DELETE: Remove trilha (admin)

6. /api/academy/progress (route.ts)
   - GET: Busca progresso do usuÃ¡rio
   - POST: Registra/atualiza progresso (start, complete, progress, quiz)

7. /api/fanpage/insights (route.ts)
   - GET: Busca insights pÃºblicos para frontpage
   - POST: Atualiza insight (admin)

8. /api/fanpage/config (route.ts)
   - GET: Busca configuraÃ§Ã£o dos blocos
   - PUT: Atualiza configuraÃ§Ã£o (single ou batch)

================================================================================
INSTRUÃ‡Ã•ES PARA O WINDSURF
================================================================================

AO ABRIR O PROJETO:
1. Ler este arquivo (HISTORICO-UNIFICADO.txt)
2. Verificar o status atual das ETAPAs
3. Continuar de onde parou

AO RECEBER COMANDO "HISTÃ“RICO":
1. Ler este arquivo completamente
2. Confirmar: "Acessei o HISTORICO-UNIFICADO.txt e entendi o contexto."
3. Aguardar prÃ³xima instruÃ§Ã£o

AO FINALIZAR QUALQUER ETAPA:
1. Atualizar este arquivo com o novo status
2. Fazer git add + commit + push
3. Informar Eduardo do que foi feito

================================================================================
FIM DO HISTÃ“RICO UNIFICADO
================================================================================

================================================================================
SESSAO 05/12/2025 20:50 UTC-5 - CICLO 1 BANCO + IMPLEMENTACAO
================================================================================

O QUE FOI FEITO:
- Auditoria completa da area de IMPLEMENTACAO no FUTURO-TERMINAR-IMPLEMENTACAO.txt
- Verificacao dos SQLs consolidados existentes (10 arquivos)
- Criacao de 6 novas TAREFAS (11 a 16) para pendencias identificadas

TAREFAS CRIADAS:
- TAREFA 11: Executar SQL_CONSOLIDADO_01_BASE.sql
- TAREFA 12: Executar SQL_CONSOLIDADO_02_ADDONS_AI_MENUS.sql
- TAREFA 13: Executar SQL_CONSOLIDADO_03_FANPAGE_VIVA.sql
- TAREFA 14: Configurar chaves de IA no Vercel
- TAREFA 15: Testar IA Curadora
- TAREFA 16: Verificar header Admin com toggle Demo/Real

SISTEMA DE TESTES IMPLEMENTADO:
- scripts/test-all-apis.js (31 APIs testadas)
- scripts/health-check.js (11 servicos verificados)
- tests/e2e/*.spec.ts (Playwright - 4 arquivos de teste)
- CHECKLIST-TESTES.md (45 testes manuais)

RESULTADOS DOS TESTES:
- Health Check: 11/11 servicos online
- APIs: 31/31 respondendo corretamente
- Taxa de sucesso: 100%

TOTAL DE TAREFAS: ANTES ERA 10 / AGORA: 16


================================================================================
SESSAO 05/12/2025 21:15 UTC-5 - CICLO 2 TRIANGULO COMPLETO
================================================================================

O QUE FOI FEITO:
- Integrado AlertCenter no Dashboard da usuaria
- AlertCenter agora aparece logo apos o banner de emergencia
- Atualizado AlertCenter para suportar ambos os formatos de dados:
  - Formato SQL consolidado (level, category, is_dismissed)
  - Formato API do diario (risk_level, risk_type, status)
- Adicionado suporte a source 'journal' (alias de 'diary')

ARQUIVOS MODIFICADOS:
- app/dashboard/page.tsx: import AlertCenter + renderizacao
- components/AlertCenter.tsx: interface RiskAlert expandida + funcoes helper

TRIANGULO DE SEGURANCA AGORA FUNCIONA:
1. Usuario salva entrada no diario com tags graves
2. API /api/diario detecta tags e cria risk_alert automaticamente
3. Dashboard mostra AlertCenter com os alertas ativos
4. Usuario pode ver Plano de Seguranca ou marcar como resolvido

BUILD: PASSOU

